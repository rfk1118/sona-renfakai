# Sona

## 个人信息

### [我是谁？](./introduction/about-me.md#关于作者)

一个喜欢技术和金融的 `it` 人。

## 工作经历

### 58用户增长部    （2020/05 ～ 至今）

负责58服务号平台搭建、首页金刚区和feed区稳定性设计和抽象，组内负责业务梳理、集群职责拆分、脚手架搭建、业务设计、核心业务编码、组内插件定制化等。

#### 58 服务号体系搭建    （2020/07 ～ 至今）

项目描述：

58服务号平台搭建目的是为各业务线（转转、租房、到家精选、招聘、58汽车、58二手车等）提供生态系统，支持多种消息类型（文本、视频、模板）触达能力，从而为各业务吸引精准流量，形成高用户留存。58服务号体系搭建与公司内部多个系统（推荐、推送、IM、账户、BI等）进行打通。

设计点：

* 服务号关注关系使用策略设计模式保证单一职责
* 消息（文本、视频、模板）推送与IM打通，模版 + 策略设计模式保证消息类型支持水平扩展
* 模版消息填充引擎设计和编码，其具备低代码开发雏形，引擎各流程节点支持插件水平扩展
* 模版消息初始化到上线流程引擎设计，使用状态机设计模式保证模版生命周期简短、清晰
* 关注网关（鉴权、监控能力）、模版消息开放平台（支持公司外部系统http调用，内部调用内部自研框架）

难点：

* 租户隔离进行探索和落地
* 数据推送向高可用推进

个人成长：

从0～1搭建服务号体系，实践了集群按照职责、稳定性等进行拆分，代码按照模块进行设计保证模块间低耦合，带领3人小团队开发情况下，在保证了快速迭代前提下又保证了可扩展性。

#### 58首页金刚位    （2021/05 ～ 至今）

项目描述：

为了解决旧版58首页金刚位在多维度下（城市、平台、版本）出现配置困难、上线后结果与预期不一致、问题排查困难、测试流程繁琐等问题，现对金刚位模块、流程进行重新设计，实现了抽象数据实体化、无Charles代理查看效果、自动化测试等保证了系统稳定性。

设计点：

* 模块职责拆分和设计，模块拆分包含icon、模版（icon组合）、维度信息配置、上线流程引擎、临时运营（图片、名称、协议、角标）、个性化
* 设计模版校验引擎（插件组合）保证配置正确性，不同引擎校验不同icon组合是否符合预期，例：某插件校验前n个不允许出现小icon
* 初始化到上线流程引擎设计，支持多模块，新增模块情况下不需要改变引擎代码，例：维度信息配置、临时运营(图片、协议、角标）
* App请求进行分组，保证单个对象的不被侵入性，支持对象复用，现有4个分组（正式、内置、效果测试、自动化测试）
* 解释器模型将版本维度配置从线变成点

难点：

* icon获取导致redis服务器流量网卡达到瓶颈
* 城市、平台、版本多维度话下版本配置上线安全性问题
* 版本配置使用线段与手机版本点之间兼容问题

个人成长：

将自顶向下（维度配置）和自下而上（icon组合）之间冲突使用黏合层（模版）进行解决，并将维度配置和icon组合从抽象转为实体，版本号 + 备忘录模式保证流程数据安全性，接口分组（Netty进/出站）到注解分组（Jsr303）以支持更多流程对bean的非侵入性实践。作为58首页门户，在流量巨大的情况下，2021年05月上线后项目稳定，该项目为组内成员拿到优秀员工。

#### 58首页feed流    （2021/10 ～ 至今）

项目描述：

58首页于2021年09月开始改版，之前对各业务线（推荐、商业广告、增长部广告、其他等）调用平铺到一个方法中，每次业务线组合修改都需要编码和上线，在改版时进行重新设计，支持无业务线增加情况下支持后台编排业务线组合能力。

设计点：

* 使用Netty中的handler对应各个业务线
* handler设计包含read、write方法，调用read进行异步调用业务线，调用write获取异步调用结果
* Pipeline代表业务线组合

难点：

* 编排业务线插件组合互斥问题
* 各业务线响应时间不同，线程配置问题

个人成长：

Netty领域模型应用到工作中，熔断框架二次开发支持注解方式将熔断信息上报到公司监控系统。

### 沣邦融资租赁（上海）有限公司     （2018/07 ～ 2020/05）

负责贷后业务设计和编码，包含扣款（回款）、个人账户、催收、凭证等系统开发和维护，在职期间由于扣款政策频繁改变，为了避免通道临时关闭导致无法扣款，亟待需要扣款路由支持动态切换三方（通联、银联、中金、宝付、邮储直联、滴滴钱包）扣款，为此搭建支付路由平台。为了让催收、财务更清晰全链路看到用户账户信息（可用余额、保证金、退款、代偿余额、逾期罚息）搭建个人账户系统。

#### 支付路由平台    （2018/10 ～ 2020/05）

项目描述：

项目意在解决沣邦用户要素验证、协议签约、放款、回款、自动化对账功能散落在多个项目，维护成本高以及扣款政策频繁变更问题，现搭建支付路由平台。要素验证为贷前风控系统提供用户属性校验以降低后期违约率，协议签约保证提高回款率（扣款要素监管增强），使用放款上下文，状态码精细化，对网络故障提供补偿重发功能，加快放款效率提升，回款支持多方（通联、银联、中金、宝付、邮储直联、滴滴钱包）划扣和中金便捷支付，自动化对账（T+1）保证数据正确和异常报警。

设计点：

* 使用 Fork/join 框架拆分批量数据任务，加快匹配三方通道效率，将旧版的扣款从1h降低至5min
* 模版设计模式编写扣款请求/扣款结果查询主流程，在主流程不变情况下使用策略模式支持三方快速（差异性）接入
* 分布式锁解决放款订单重复校验、放款订单发送、用户扣款等互斥事件问题
* 使用 ByteBuddy 更改中金字节码，解决中金进程内不支持商户动态切换问题，以支持不同商户协议签约、放款、扣款、便捷支付等

难点：

* 分钟级放款，网络故障问题
* 三方通道不同费率融入扣款路由通道，降低成本

个人成长：

金融安全和稳定性认知体系搭建，从扣款流量（灰度）按照比例迁移到新平台、两套系统共存期间进行表双同步等困难问题中意识到维护成本、模块解耦合重要性。

相关技术 ：

SpringBoot、SpringMvc、Mybatis、Oracle、Redis 、Kafka、Maven、Git

#### 个人账户系统    （2018/10 ～ 2020/05）

项目描述：

个人账户系统设计是为了解决个人账户入账/出账，以及资方（微众银行、工行、中关村银行、江苏金租银行、华瑞银行）对接。个人账户包含可用余额、保证金、退款、代偿余额等，系统支持还款计划表扣款订单生成、逾期罚息产生、代偿余额标准化、提前结清等。

设计点：

* 还款计划表月账单订单生成引擎支持批量扣款、单笔实时、便捷支付等多种类型订单生成，享元设计模式管理引擎节点
* 账户锁使用乐观锁，支持多种业务场景（批量扣款、单笔实时、便捷支付、对公打款、提前结清等）
* 逾期罚息计算，支持黑名单、白名单、减免等
* 策略设计模式处理资方代偿余额，ETL数据标准化
* 责任链设计支持账户出/入账（扣款、保证金、退款、提前结清等）校验和处理；
* 提前结清各资方金额计算逻辑抽象和编写；
* 位图设计用户提前结清数据权限，多角色权限支持或运算合并权限

个人成长：

金融安全和稳定性认知体系搭建，从扣款流量（灰度）按照比例迁移到新平台，两套系统共存期间进行表双同步等困难问题，意识到维护成本、模块解耦合重要性。

相关技术 ：

SpringBoot、SpringMvc、Mybatis、Oracle、Redis 、Maven、Git

#### 核心系统维护    （2018.8 ～ 2019.11）

项目描述：

项目提供了贷款申请、风控审批、视频面签、合同管理、扣款管理、催收、财务凭证管理等功能。

责任描述：

* 批量扣款业务维护
* 实时扣款从手动拆单到系统拆单，并从宝付通道迁移到通联支付
* 还款计划表入账

相关技术：

Spring、Struts2、Hibernate、Jsp、Ant
