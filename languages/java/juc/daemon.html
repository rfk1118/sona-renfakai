<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>daemon | 智慧不可赐！</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <meta name="description" content="因果不可改、智慧不可赐、真法不可说、无缘不能渡！">
    
    <link rel="preload" href="/assets/css/0.styles.7f49ab7e.css" as="style"><link rel="preload" href="/assets/js/app.ebb539c6.js" as="script"><link rel="preload" href="/assets/js/2.a821a698.js" as="script"><link rel="preload" href="/assets/js/73.e93ccb32.js" as="script"><link rel="prefetch" href="/assets/js/10.97a253b2.js"><link rel="prefetch" href="/assets/js/11.2d76e85f.js"><link rel="prefetch" href="/assets/js/12.9edf4924.js"><link rel="prefetch" href="/assets/js/13.57b8ead3.js"><link rel="prefetch" href="/assets/js/14.2066dc44.js"><link rel="prefetch" href="/assets/js/15.7ab45057.js"><link rel="prefetch" href="/assets/js/16.98006175.js"><link rel="prefetch" href="/assets/js/17.4cc14191.js"><link rel="prefetch" href="/assets/js/18.6a00dd61.js"><link rel="prefetch" href="/assets/js/19.2ff513b9.js"><link rel="prefetch" href="/assets/js/20.3ab7d04a.js"><link rel="prefetch" href="/assets/js/21.547bf18b.js"><link rel="prefetch" href="/assets/js/22.df9c6e8c.js"><link rel="prefetch" href="/assets/js/23.ec4a6558.js"><link rel="prefetch" href="/assets/js/24.72a8ae25.js"><link rel="prefetch" href="/assets/js/25.481d1991.js"><link rel="prefetch" href="/assets/js/26.7f7a95ae.js"><link rel="prefetch" href="/assets/js/27.12a4bc56.js"><link rel="prefetch" href="/assets/js/28.d23a2820.js"><link rel="prefetch" href="/assets/js/29.0d06e618.js"><link rel="prefetch" href="/assets/js/3.e5a5431b.js"><link rel="prefetch" href="/assets/js/30.be140888.js"><link rel="prefetch" href="/assets/js/31.5b396d77.js"><link rel="prefetch" href="/assets/js/32.43cf010a.js"><link rel="prefetch" href="/assets/js/33.5d714661.js"><link rel="prefetch" href="/assets/js/34.d67c1590.js"><link rel="prefetch" href="/assets/js/35.f0b10d5a.js"><link rel="prefetch" href="/assets/js/36.04250ac0.js"><link rel="prefetch" href="/assets/js/37.70c9b6be.js"><link rel="prefetch" href="/assets/js/38.548715c8.js"><link rel="prefetch" href="/assets/js/39.29615be3.js"><link rel="prefetch" href="/assets/js/4.8be84d6d.js"><link rel="prefetch" href="/assets/js/40.d567bd08.js"><link rel="prefetch" href="/assets/js/41.4c59f6c5.js"><link rel="prefetch" href="/assets/js/42.5d553415.js"><link rel="prefetch" href="/assets/js/43.14f8a95f.js"><link rel="prefetch" href="/assets/js/44.074c539d.js"><link rel="prefetch" href="/assets/js/45.8a651976.js"><link rel="prefetch" href="/assets/js/46.2b382c4e.js"><link rel="prefetch" href="/assets/js/47.92ec38c9.js"><link rel="prefetch" href="/assets/js/48.fbcd6e46.js"><link rel="prefetch" href="/assets/js/49.bf912439.js"><link rel="prefetch" href="/assets/js/5.f134cbe2.js"><link rel="prefetch" href="/assets/js/50.cc73b0ee.js"><link rel="prefetch" href="/assets/js/51.8c5d93d9.js"><link rel="prefetch" href="/assets/js/52.dc9be99c.js"><link rel="prefetch" href="/assets/js/53.b8ea9312.js"><link rel="prefetch" href="/assets/js/54.3d64bcc9.js"><link rel="prefetch" href="/assets/js/55.5dee4397.js"><link rel="prefetch" href="/assets/js/56.f693666c.js"><link rel="prefetch" href="/assets/js/57.203f5920.js"><link rel="prefetch" href="/assets/js/58.ba1c4232.js"><link rel="prefetch" href="/assets/js/59.1aac9c13.js"><link rel="prefetch" href="/assets/js/6.24241a6a.js"><link rel="prefetch" href="/assets/js/60.857daea1.js"><link rel="prefetch" href="/assets/js/61.eea6567a.js"><link rel="prefetch" href="/assets/js/62.d198aa05.js"><link rel="prefetch" href="/assets/js/63.cbd1766b.js"><link rel="prefetch" href="/assets/js/64.f50e3ea0.js"><link rel="prefetch" href="/assets/js/65.52d7359d.js"><link rel="prefetch" href="/assets/js/66.545879a9.js"><link rel="prefetch" href="/assets/js/67.2d32f05b.js"><link rel="prefetch" href="/assets/js/68.8a53544a.js"><link rel="prefetch" href="/assets/js/69.17c7fc0b.js"><link rel="prefetch" href="/assets/js/7.7bb73436.js"><link rel="prefetch" href="/assets/js/70.3ea41e34.js"><link rel="prefetch" href="/assets/js/71.b1a2ddbb.js"><link rel="prefetch" href="/assets/js/72.3c8f7efb.js"><link rel="prefetch" href="/assets/js/74.779ad948.js"><link rel="prefetch" href="/assets/js/75.99723eec.js"><link rel="prefetch" href="/assets/js/76.627ddca6.js"><link rel="prefetch" href="/assets/js/77.0b56944d.js"><link rel="prefetch" href="/assets/js/78.bc986806.js"><link rel="prefetch" href="/assets/js/79.b154bb7e.js"><link rel="prefetch" href="/assets/js/8.9a6ed2a3.js"><link rel="prefetch" href="/assets/js/80.86b25204.js"><link rel="prefetch" href="/assets/js/81.c00fa2e3.js"><link rel="prefetch" href="/assets/js/82.0e6cac87.js"><link rel="prefetch" href="/assets/js/83.373c120d.js"><link rel="prefetch" href="/assets/js/84.c7e4572b.js"><link rel="prefetch" href="/assets/js/85.04552513.js"><link rel="prefetch" href="/assets/js/86.44dd66c4.js"><link rel="prefetch" href="/assets/js/87.e64ee616.js"><link rel="prefetch" href="/assets/js/88.1829e1c1.js"><link rel="prefetch" href="/assets/js/89.d1608c83.js"><link rel="prefetch" href="/assets/js/9.3981ffb2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f49ab7e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">智慧不可赐！</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/introduction/about-me.html" class="sidebar-link">作者</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Netty</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>编程语言</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/languages/java/auto-box.html" class="sidebar-link">自动装箱</a></li><li><a href="/languages/java/delay-queue.html" class="sidebar-link">锁局部变量</a></li><li><a href="/languages/java/introduction-to-java-bytecode.html" class="sidebar-link">基于栈的指令集</a></li><li><a href="/languages/java/heap-java.html" class="sidebar-link">Heap源码</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>多线程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/languages/java/juc/atomic.html" class="sidebar-link">cas</a></li><li><a href="/languages/java/juc/aos.html" class="sidebar-link">exclusively</a></li><li><a href="/languages/java/juc/aqs.html" class="sidebar-link">aqs</a></li><li><a href="/languages/java/juc/blocking.html" class="sidebar-link">LockSupport</a></li><li><a href="/languages/java/juc/fair.html" class="sidebar-link">Fair</a></li><li><a href="/languages/java/juc/daemon.html" aria-current="page" class="active sidebar-link">daemon</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/languages/java/juc/daemon.html#用户线程测试" class="sidebar-link">用户线程测试</a></li><li class="sidebar-sub-header"><a href="/languages/java/juc/daemon.html#daemon测试" class="sidebar-link">daemon测试</a></li><li class="sidebar-sub-header"><a href="/languages/java/juc/daemon.html#daemon错误使用" class="sidebar-link">daemon错误使用</a></li></ul></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>go</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/languages/go/read-me.html" class="sidebar-link">常用资料</a></li><li><a href="/languages/go/heap-go.html" class="sidebar-link">Heap源码</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="daemon">daemon</h1> <p>Java中的线程主要分为两种，用户线程，daemon线程。</p> <div class="language-java extra-class"><pre class="language-java"><code>     <span class="token comment">/**
     * 标记当前线程是daemon线程还是用户线程
     * Marks this thread as either a {@linkplain #isDaemon daemon} thread
     * 虚拟机会在所有的线程都是daemon线程的时候退出
     * or a user thread. The Java Virtual Machine exits when the only
     * threads running are all daemon threads.
     *  这个方法必须在线程启动前进行设置
     * &lt;p&gt; This method must be invoked before the thread is started.
     *
     * 如果设置成true,代表其为daemon线程
     * @param  on
     *         if {@code true}, marks this thread as a daemon thread
     *
     * @throws  IllegalThreadStateException
     *          if this thread is {@linkplain #isAlive alive}
     *
     * @throws  SecurityException
     *          if {@link #checkAccess} determines that the current
     *          thread cannot modify this thread
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> on<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">checkAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalThreadStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        daemon <span class="token operator">=</span> on<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="用户线程测试">用户线程测试</h2> <ol><li>编写测试代码</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserThread</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> userThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;UserThread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userThread<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;UserThread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>在启动后，发现在控制台一直打印<code>UserThread</code>,并且程序没有退出，查看线程状况</li></ol> <div class="language-java extra-class"><pre class="language-java"><code>➜    jps <span class="token operator">-</span>l <span class="token operator">|</span> grep <span class="token string">'UserThread'</span>

<span class="token comment">// 从这里可以找到UserThread的虚拟机</span>
<span class="token number">49501</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>sona<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>daemon<span class="token punctuation">.</span></span>UserThread</span>

<span class="token comment">// 查看线程情况</span>
➜   jstack <span class="token number">48718</span>

<span class="token comment">// 这里这个就是我们的用户线程</span>
<span class="token string">&quot;UserThread&quot;</span> #<span class="token number">11</span> prio<span class="token operator">=</span><span class="token number">5</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f988788d800</span> nid<span class="token operator">=</span><span class="token number">0x600b</span> runnable <span class="token punctuation">[</span><span class="token number">0x00000003074d2000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>FileOutputStream</span><span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span><span class="token class-name">Native</span> <span class="token class-name">Method</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>FileOutputStream</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">FileOutputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">326</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedOutputStream</span><span class="token punctuation">.</span><span class="token function">flushBuffer</span><span class="token punctuation">(</span><span class="token class-name">BufferedOutputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">82</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedOutputStream</span><span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token class-name">BufferedOutputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">140</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c0050f90<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedOutputStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">482</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c00088e0<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamEncoder</span><span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span><span class="token class-name">StreamEncoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">221</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamEncoder</span><span class="token punctuation">.</span><span class="token function">implFlushBuffer</span><span class="token punctuation">(</span><span class="token class-name">StreamEncoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">291</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamEncoder</span><span class="token punctuation">.</span><span class="token function">flushBuffer</span><span class="token punctuation">(</span><span class="token class-name">StreamEncoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">104</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c00088a0<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>OutputStreamWriter</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>OutputStreamWriter</span><span class="token punctuation">.</span><span class="token function">flushBuffer</span><span class="token punctuation">(</span><span class="token class-name">OutputStreamWriter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">185</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">527</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> eliminated <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c00088e0<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">669</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">806</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c00088e0<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>sona<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>daemon<span class="token punctuation">.</span></span>UserThread</span><span class="token punctuation">.</span>lambda$main$<span class="token function">0</span><span class="token punctuation">(</span><span class="token class-name">UserThread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>sona<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>daemon<span class="token punctuation">.</span></span>UserThread</span>$$<span class="token class-name">Lambda</span>$<span class="token number">1</span><span class="token operator">/</span><span class="token number">1828972342.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Unknown</span> <span class="token class-name">Source</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">748</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="daemon测试">daemon测试</h2> <ol><li>编写测试代码</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DaemonThread</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> daemonThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;DaemonThread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        daemonThread<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        daemonThread<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;DaemonThread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        daemonThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 防止线程退出无法jstack</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>在启动后，发现控制台打印一会<code>DaemonThread</code>，程序退出，在退出前查看线程状况</li></ol> <div class="language-java extra-class"><pre class="language-java"><code>➜   jps <span class="token operator">-</span>lm <span class="token operator">|</span> grep <span class="token string">'DaemonThread'</span>
<span class="token number">50329</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>sona<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>daemon<span class="token punctuation">.</span></span>DaemonThread</span>
➜   jstack <span class="token number">50329</span>

<span class="token comment">// 其他忽略</span>
<span class="token comment">// 从这里可以看出线程被设置成了daemon</span>
<span class="token string">&quot;DaemonThread&quot;</span> #<span class="token number">11</span> daemon prio<span class="token operator">=</span><span class="token number">5</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f7f621b1000</span> nid<span class="token operator">=</span><span class="token number">0xa22b</span> runnable <span class="token punctuation">[</span><span class="token number">0x000000030a8fe000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>FileOutputStream</span><span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span><span class="token class-name">Native</span> <span class="token class-name">Method</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>FileOutputStream</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">FileOutputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">326</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedOutputStream</span><span class="token punctuation">.</span><span class="token function">flushBuffer</span><span class="token punctuation">(</span><span class="token class-name">BufferedOutputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">82</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedOutputStream</span><span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token class-name">BufferedOutputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">140</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c004a0f0<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedOutputStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">482</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c000a8a0<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamEncoder</span><span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span><span class="token class-name">StreamEncoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">221</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamEncoder</span><span class="token punctuation">.</span><span class="token function">implFlushBuffer</span><span class="token punctuation">(</span><span class="token class-name">StreamEncoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">291</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamEncoder</span><span class="token punctuation">.</span><span class="token function">flushBuffer</span><span class="token punctuation">(</span><span class="token class-name">StreamEncoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">104</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c000a860<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>OutputStreamWriter</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>OutputStreamWriter</span><span class="token punctuation">.</span><span class="token function">flushBuffer</span><span class="token punctuation">(</span><span class="token class-name">OutputStreamWriter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">185</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">527</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> eliminated <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c000a8a0<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">669</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">806</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c000a8a0<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>sona<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>daemon<span class="token punctuation">.</span></span>DaemonThread</span><span class="token punctuation">.</span>lambda$main$<span class="token function">0</span><span class="token punctuation">(</span><span class="token class-name">DaemonThread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>sona<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>daemon<span class="token punctuation">.</span></span>DaemonThread</span>$$<span class="token class-name">Lambda</span>$<span class="token number">1</span><span class="token operator">/</span><span class="token number">1828972342.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Unknown</span> <span class="token class-name">Source</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">748</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="daemon错误使用">daemon错误使用</h2> <ol><li>在线程启动后，重新设置线程类型</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DaemonThreadError</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> daemonThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;DaemonThread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>

                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        daemonThread<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;DaemonThreadError&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        daemonThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>daemonThread<span class="token punctuation">.</span><span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        daemonThread<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>如果线程存活，会进行阻断，所以类型也不会设置上去</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> on<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">checkAccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalThreadStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      daemon <span class="token operator">=</span> on<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Exception</span> in thread <span class="token string">&quot;main&quot;</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>IllegalThreadStateException</span>
  at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">1359</span><span class="token punctuation">)</span>
  at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>sona<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>daemon<span class="token punctuation">.</span></span>DaemonThreadError</span><span class="token punctuation">.</span><span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">DaemonThreadError</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>查看类型，依然是用户线程</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token string">&quot;DaemonThreadError&quot;</span> #<span class="token number">11</span> prio<span class="token operator">=</span><span class="token number">5</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007fddf4a08800</span> nid<span class="token operator">=</span><span class="token number">0x6027</span> runnable <span class="token punctuation">[</span><span class="token number">0x0000000306faa000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>FileOutputStream</span><span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span><span class="token class-name">Native</span> <span class="token class-name">Method</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>FileOutputStream</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">FileOutputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">326</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedOutputStream</span><span class="token punctuation">.</span><span class="token function">flushBuffer</span><span class="token punctuation">(</span><span class="token class-name">BufferedOutputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">82</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedOutputStream</span><span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token class-name">BufferedOutputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">140</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c002f9d0<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedOutputStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">482</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c00068e8<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamEncoder</span><span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span><span class="token class-name">StreamEncoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">221</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamEncoder</span><span class="token punctuation">.</span><span class="token function">implFlushBuffer</span><span class="token punctuation">(</span><span class="token class-name">StreamEncoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">291</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamEncoder</span><span class="token punctuation">.</span><span class="token function">flushBuffer</span><span class="token punctuation">(</span><span class="token class-name">StreamEncoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">104</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c00068a8<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>OutputStreamWriter</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>OutputStreamWriter</span><span class="token punctuation">.</span><span class="token function">flushBuffer</span><span class="token punctuation">(</span><span class="token class-name">OutputStreamWriter</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">185</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">.</span><span class="token function">newLine</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">546</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> eliminated <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c00068e8<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">PrintStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">807</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c00068e8<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>PrintStream</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>sona<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>daemon<span class="token punctuation">.</span></span>DaemonThreadError</span><span class="token punctuation">.</span>lambda$main$<span class="token function">0</span><span class="token punctuation">(</span><span class="token class-name">DaemonThreadError</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>sona<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>daemon<span class="token punctuation">.</span></span>DaemonThreadError</span>$$<span class="token class-name">Lambda</span>$<span class="token number">1</span><span class="token operator">/</span><span class="token number">1828972342.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Unknown</span> <span class="token class-name">Source</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">748</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="总结">总结</h3> <p>java线程分为用户线程和daemon线程，jvm常见的daemon线程有<code>attach,CompilerThread,Monitor Ctrl-Break,Signal Dispatcher,Finalizer,Reference Handler</code>等等。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Full</span> thread dump <span class="token class-name">Java</span> <span class="token class-name">HotSpot</span><span class="token punctuation">(</span>TM<span class="token punctuation">)</span> <span class="token number">64</span><span class="token operator">-</span><span class="token class-name">Bit</span> <span class="token class-name">Server</span> VM <span class="token punctuation">(</span><span class="token number">25.281</span><span class="token operator">-</span>b09 mixed mode<span class="token punctuation">)</span><span class="token operator">:</span>

<span class="token comment">// 该进程主要负责远程attach，包括远程debug</span>
<span class="token string">&quot;Attach Listener&quot;</span> #<span class="token number">13</span> daemon prio<span class="token operator">=</span><span class="token number">9</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9d52810800</span> nid<span class="token operator">=</span><span class="token number">0x6803</span> waiting on condition <span class="token punctuation">[</span><span class="token number">0x0000000000000000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE

<span class="token string">&quot;DestroyJavaVM&quot;</span> #<span class="token number">12</span> prio<span class="token operator">=</span><span class="token number">5</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9d7280b800</span> nid<span class="token operator">=</span><span class="token number">0x1b03</span> waiting on condition <span class="token punctuation">[</span><span class="token number">0x0000000000000000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE


<span class="token string">&quot;Service Thread&quot;</span> #<span class="token number">10</span> daemon prio<span class="token operator">=</span><span class="token number">9</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f98850a2000</span> nid<span class="token operator">=</span><span class="token number">0xa40f</span> runnable <span class="token punctuation">[</span><span class="token number">0x0000000000000000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE

<span class="token comment">// 编译器线程 c1</span>
<span class="token comment">// c1编译器</span>
<span class="token string">&quot;C1 CompilerThread3&quot;</span> #<span class="token number">9</span> daemon prio<span class="token operator">=</span><span class="token number">9</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9845018800</span> nid<span class="token operator">=</span><span class="token number">0xa603</span> waiting on condition <span class="token punctuation">[</span><span class="token number">0x0000000000000000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE

<span class="token comment">// c2编译器</span>
<span class="token string">&quot;C2 CompilerThread2&quot;</span> #<span class="token number">8</span> daemon prio<span class="token operator">=</span><span class="token number">9</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886826800</span> nid<span class="token operator">=</span><span class="token number">0x5703</span> waiting on condition <span class="token punctuation">[</span><span class="token number">0x0000000000000000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE

<span class="token string">&quot;C2 CompilerThread1&quot;</span> #<span class="token number">7</span> daemon prio<span class="token operator">=</span><span class="token number">9</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886825800</span> nid<span class="token operator">=</span><span class="token number">0xa803</span> waiting on condition <span class="token punctuation">[</span><span class="token number">0x0000000000000000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE

<span class="token string">&quot;C2 CompilerThread0&quot;</span> #<span class="token number">6</span> daemon prio<span class="token operator">=</span><span class="token number">9</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886825000</span> nid<span class="token operator">=</span><span class="token number">0xa903</span> waiting on condition <span class="token punctuation">[</span><span class="token number">0x0000000000000000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE

<span class="token comment">// 中断监听器</span>
<span class="token string">&quot;Monitor Ctrl-Break&quot;</span> #<span class="token number">5</span> daemon prio<span class="token operator">=</span><span class="token number">5</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886822800</span> nid<span class="token operator">=</span><span class="token number">0x4047</span> runnable <span class="token punctuation">[</span><span class="token number">0x0000000306dbd000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>SocketInputStream</span><span class="token punctuation">.</span><span class="token function">socketRead0</span><span class="token punctuation">(</span><span class="token class-name">Native</span> <span class="token class-name">Method</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>SocketInputStream</span><span class="token punctuation">.</span><span class="token function">socketRead</span><span class="token punctuation">(</span><span class="token class-name">SocketInputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">116</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>SocketInputStream</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token class-name">SocketInputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">171</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>SocketInputStream</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token class-name">SocketInputStream</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">141</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamDecoder</span><span class="token punctuation">.</span><span class="token function">readBytes</span><span class="token punctuation">(</span><span class="token class-name">StreamDecoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">284</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamDecoder</span><span class="token punctuation">.</span><span class="token function">implRead</span><span class="token punctuation">(</span><span class="token class-name">StreamDecoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">326</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>cs<span class="token punctuation">.</span></span>StreamDecoder</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token class-name">StreamDecoder</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">178</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c000af28<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>InputStreamReader</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>InputStreamReader</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token class-name">InputStreamReader</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">184</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedReader</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token class-name">BufferedReader</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">161</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedReader</span><span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token class-name">BufferedReader</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">324</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c000af28<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>InputStreamReader</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>BufferedReader</span><span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token class-name">BufferedReader</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">389</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>intellij<span class="token punctuation">.</span>rt<span class="token punctuation">.</span>execution<span class="token punctuation">.</span>application<span class="token punctuation">.</span></span>AppMainV2</span>$<span class="token number">1.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">AppMainV2</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">49</span><span class="token punctuation">)</span>

<span class="token string">&quot;Signal Dispatcher&quot;</span> #<span class="token number">4</span> daemon prio<span class="token operator">=</span><span class="token number">9</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886058800</span> nid<span class="token operator">=</span><span class="token number">0x3f03</span> runnable <span class="token punctuation">[</span><span class="token number">0x0000000000000000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> RUNNABLE

<span class="token string">&quot;Finalizer&quot;</span> #<span class="token number">3</span> daemon prio<span class="token operator">=</span><span class="token number">8</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9887008800</span> nid<span class="token operator">=</span><span class="token number">0x4a1f</span> in <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">0x0000000306aa9000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> WAITING <span class="token punctuation">(</span>on object monitor<span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token class-name">Native</span> <span class="token class-name">Method</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> waiting on <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c0008b90<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref<span class="token punctuation">.</span></span>ReferenceQueue</span>$<span class="token class-name">Lock</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref<span class="token punctuation">.</span></span>ReferenceQueue</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">ReferenceQueue</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">144</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c0008b90<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref<span class="token punctuation">.</span></span>ReferenceQueue</span>$<span class="token class-name">Lock</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref<span class="token punctuation">.</span></span>ReferenceQueue</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">ReferenceQueue</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">165</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref<span class="token punctuation">.</span></span>Finalizer</span>$<span class="token class-name">FinalizerThread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Finalizer</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">216</span><span class="token punctuation">)</span>

<span class="token string">&quot;Reference Handler&quot;</span> #<span class="token number">2</span> daemon prio<span class="token operator">=</span><span class="token number">10</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f988500e000</span> nid<span class="token operator">=</span><span class="token number">0x4c23</span> in <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">0x00000003069a6000</span><span class="token punctuation">]</span>
   <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread<span class="token punctuation">.</span>State</span><span class="token operator">:</span> WAITING <span class="token punctuation">(</span>on object monitor<span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token class-name">Native</span> <span class="token class-name">Method</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> waiting on <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c0008c38<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref<span class="token punctuation">.</span></span>Reference</span>$<span class="token class-name">Lock</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span><span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">502</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref<span class="token punctuation">.</span></span>Reference</span><span class="token punctuation">.</span><span class="token function">tryHandlePending</span><span class="token punctuation">(</span><span class="token class-name">Reference</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">191</span><span class="token punctuation">)</span>
        <span class="token operator">-</span> locked <span class="token generics"><span class="token punctuation">&lt;</span>0x00000006c0008c38<span class="token punctuation">&gt;</span></span> <span class="token punctuation">(</span>a <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref<span class="token punctuation">.</span></span>Reference</span>$<span class="token class-name">Lock</span><span class="token punctuation">)</span>
        at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ref<span class="token punctuation">.</span></span>Reference</span>$<span class="token class-name">ReferenceHandler</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Reference</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">153</span><span class="token punctuation">)</span>

<span class="token string">&quot;VM Thread&quot;</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886053000</span> nid<span class="token operator">=</span><span class="token number">0x3703</span> runnable

<span class="token string">&quot;GC task thread#0 (ParallelGC)&quot;</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886012000</span> nid<span class="token operator">=</span><span class="token number">0x534f</span> runnable

<span class="token string">&quot;GC task thread#1 (ParallelGC)&quot;</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886012800</span> nid<span class="token operator">=</span><span class="token number">0x2e03</span> runnable

<span class="token string">&quot;GC task thread#2 (ParallelGC)&quot;</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886013000</span> nid<span class="token operator">=</span><span class="token number">0x3003</span> runnable

<span class="token string">&quot;GC task thread#3 (ParallelGC)&quot;</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886013800</span> nid<span class="token operator">=</span><span class="token number">0x5203</span> runnable

<span class="token string">&quot;GC task thread#4 (ParallelGC)&quot;</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886014800</span> nid<span class="token operator">=</span><span class="token number">0x3303</span> runnable

<span class="token string">&quot;GC task thread#5 (ParallelGC)&quot;</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886015000</span> nid<span class="token operator">=</span><span class="token number">0x5003</span> runnable

<span class="token string">&quot;GC task thread#6 (ParallelGC)&quot;</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886015800</span> nid<span class="token operator">=</span><span class="token number">0x3403</span> runnable

<span class="token string">&quot;GC task thread#7 (ParallelGC)&quot;</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886016000</span> nid<span class="token operator">=</span><span class="token number">0x3503</span> runnable

<span class="token string">&quot;VM Periodic Task Thread&quot;</span> os_prio<span class="token operator">=</span><span class="token number">31</span> tid<span class="token operator">=</span><span class="token number">0x00007f9886823800</span> nid<span class="token operator">=</span><span class="token number">0xa213</span> waiting on condition

JNI global references<span class="token operator">:</span> <span class="token number">214</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/languages/java/juc/fair.html" class="prev">
        Fair
      </a></span> <span class="next"><a href="/languages/go/read-me.html">
        常用资料
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div></div><!----></div></div>
    <script src="/assets/js/app.ebb539c6.js" defer></script><script src="/assets/js/2.a821a698.js" defer></script><script src="/assets/js/73.e93ccb32.js" defer></script>
  </body>
</html>
