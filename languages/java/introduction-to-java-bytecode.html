<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://renfakai.com/languages/java/introduction-to-java-bytecode.html"><meta property="og:site_name" content="天道酬勤"><meta property="og:title" content="基于栈的指令集"><meta property="og:description" content="基于栈的指令集 原文地址 Java 字节码简介继续深入研究 JVM 内部和 Java 字节码，以了解如何分解文件以进行深入检查。 读编译后的字节码是很乏味的，但是对 Java 开发者很有用。为什么还要第一时间学习这些低级内容呢？这是我上周发生的情况，我在我的电脑上对一些代码进行了变更， 编译成 Jar 并部署到服务器去测试一个潜在的性能问题。不幸得是这些代码没有提交到版本控制系统， 出于一些其他原因，我电脑对代码的改变被删除了，并且找不到轨迹，过了几个月后，我需要在源代码上进行变更(这些代码花了很大力气编写)，但是我找不到它们了!"><meta property="og:type" content="article"><meta property="og:image" content="https://renfakai.com/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-08-29T13:46:07.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="基于栈的指令集"><meta property="article:modified_time" content="2023-08-29T13:46:07.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"基于栈的指令集","image":["https://renfakai.com/"],"dateModified":"2023-08-29T13:46:07.000Z","author":[]}</script><meta name="author" content="任发凯"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="apple-mobile-web-app-capable" content="yes"><title>基于栈的指令集 | 天道酬勤</title><meta name="description" content="基于栈的指令集 原文地址 Java 字节码简介继续深入研究 JVM 内部和 Java 字节码，以了解如何分解文件以进行深入检查。 读编译后的字节码是很乏味的，但是对 Java 开发者很有用。为什么还要第一时间学习这些低级内容呢？这是我上周发生的情况，我在我的电脑上对一些代码进行了变更， 编译成 Jar 并部署到服务器去测试一个潜在的性能问题。不幸得是这些代码没有提交到版本控制系统， 出于一些其他原因，我电脑对代码的改变被删除了，并且找不到轨迹，过了几个月后，我需要在源代码上进行变更(这些代码花了很大力气编写)，但是我找不到它们了!">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-1085fd2c.css" as="style"><link rel="stylesheet" href="/assets/style-1085fd2c.css">
    <link rel="modulepreload" href="/assets/app-9e5f6da6.js"><link rel="modulepreload" href="/assets/framework-e54e0297.js"><link rel="modulepreload" href="/assets/introduction-to-java-bytecode.html-6b963458.js"><link rel="modulepreload" href="/assets/introduction-to-java-bytecode.html-70b4580f.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><!----><!----><span class="site-name">天道酬勤</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!----><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/rfk1118" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/introduction/" class="nav-link sidebar-link sidebar-page" aria-label="工作经历"><!---->工作经历<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/web3/" class="title">web3</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/web3/solitify/ierc20.html" class="nav-link sidebar-link sidebar-page" aria-label="IERC20"><!---->IERC20<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web3/solitify/IUniswapV2Factory.html" class="nav-link sidebar-link sidebar-page" aria-label="IUniswapV2Factory"><!---->IUniswapV2Factory<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web3/solitify/UniswapV2Pair.html" class="nav-link sidebar-link sidebar-page" aria-label="UniswapV2Pair"><!---->UniswapV2Pair<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web3/convert-abi.html" class="nav-link sidebar-link sidebar-page" aria-label="Human-Readable ABI"><!---->Human-Readable ABI<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web3/flashloan.html" class="nav-link sidebar-link sidebar-page" aria-label="FlashLoan"><!---->FlashLoan<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web3/flashloanV3.html" class="nav-link sidebar-link sidebar-page" aria-label="FlashLoanV3"><!---->FlashLoanV3<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/terminology/" class="title">股票</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/terminology/1A0001.html" class="nav-link sidebar-link sidebar-page" aria-label="上证指数"><!---->上证指数<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/terminology/601919.html" class="nav-link sidebar-link sidebar-page" aria-label="中远海控"><!---->中远海控<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/terminology/601515.html" class="nav-link sidebar-link sidebar-page" aria-label="东风股份"><!---->东风股份<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/thousand/" class="title">国学</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/thousand/tree.html" class="nav-link sidebar-link sidebar-page" aria-label="三山献鼎"><!---->三山献鼎<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/middleware/" class="title">中间件</a><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/middleware/netty/" class="title">Netty</a><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/middleware/netty/knowledge/" class="title">基础知识</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/middleware/netty/knowledge/reference.html" class="nav-link sidebar-link sidebar-page" aria-label="参考资料"><!---->参考资料<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/middleware/netty/knowledge/read-source.html" class="nav-link sidebar-link sidebar-page" aria-label="如何读源码"><!---->如何读源码<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/middleware/netty/knowledge/quick-start.html" class="nav-link sidebar-link sidebar-page" aria-label="快速上手"><!---->快速上手<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">EventLoop</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/middleware/netty/nio/event-loop/nio-event-loop-group.html" class="nav-link sidebar-link sidebar-page" aria-label="EventLoopGroup"><!---->EventLoopGroup<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/middleware/netty/nio/event-loop/nio-event-loop.html" class="nav-link sidebar-link sidebar-page" aria-label="EventLoop"><!---->EventLoop<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/middleware/netty/nio/selectors/selector.html" class="title">Selectors</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/middleware/netty/nio/selectors/open-selector.html" class="nav-link sidebar-link sidebar-page" aria-label="OpenSelector"><!---->OpenSelector<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/middleware/netty/nio/selectors/thread-factory.html" class="nav-link sidebar-link sidebar-page" aria-label="DefaultThreadFactory"><!---->DefaultThreadFactory<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/middleware/netty/nio/selectors/chooser-factory.html" class="nav-link sidebar-link sidebar-page" aria-label="ChooserFactory"><!---->ChooserFactory<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a href="/middleware/netty/nio/bootstrap/bootstrap.html" class="nav-link sidebar-link sidebar-page" aria-label="Bootstrap"><!---->Bootstrap<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/middleware/netty/nio/channels/channel.html" class="title">Channel</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/middleware/netty/nio/channels/channel-init.html" class="nav-link sidebar-link sidebar-page" aria-label="Channel-Init"><!---->Channel-Init<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/middleware/netty/nio/channels/channel-register.html" class="nav-link sidebar-link sidebar-page" aria-label="Channel-register"><!---->Channel-register<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/middleware/netty/nio/channels/channel-handler.html" class="nav-link sidebar-link sidebar-page" aria-label="Channel-handler"><!---->Channel-handler<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/middleware/netty/nio/channels/channel-bind.html" class="nav-link sidebar-link sidebar-page" aria-label="Channel-bind"><!---->Channel-bind<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/middleware/netty/nio/channels/channel-unsafe.html" class="nav-link sidebar-link sidebar-page" aria-label="Channel-Unsafe"><!---->Channel-Unsafe<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/middleware/netty/nio/channels/channel-pipeline.html" class="nav-link sidebar-link sidebar-page" aria-label="Channel-Pipeline"><!---->Channel-Pipeline<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a href="/middleware/netty/nio/codec/codec.html" class="nav-link sidebar-link sidebar-page" aria-label="Codec"><!---->Codec<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a href="/middleware/nginx/" class="nav-link sidebar-link sidebar-page" aria-label="nginx"><!---->nginx<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/framework/spring/" class="title">Spring</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/framework/spring/di-concept.html" class="nav-link sidebar-link sidebar-page" aria-label="DI概念"><!---->DI概念<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/framework/spring/di.html" class="nav-link sidebar-link sidebar-page" aria-label="DI实现"><!---->DI实现<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/framework/spring/initialize-bean.html" class="nav-link sidebar-link sidebar-page" aria-label="扩展点"><!---->扩展点<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading active"><!----><span class="title">编程语言</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading active"><!----><span class="title">Java</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">虚拟机</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/languages/java/jvm/jvm.html" class="nav-link sidebar-link sidebar-page" aria-label="jvm"><!---->jvm<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/jvm/layout/run-time-data-areas.html" class="nav-link sidebar-link sidebar-page" aria-label="运行时数据"><!---->运行时数据<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/jvm/layout/pc-register.html" class="nav-link sidebar-link sidebar-page" aria-label="Pc寄存器"><!---->Pc寄存器<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/jvm/layout/stacks.html" class="nav-link sidebar-link sidebar-page" aria-label="虚拟机栈"><!---->虚拟机栈<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/jvm/layout/Frames.html" class="nav-link sidebar-link sidebar-page" aria-label="栈帧"><!---->栈帧<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/jvm/layout/share-data.html" class="nav-link sidebar-link sidebar-page" aria-label="共享数据"><!---->共享数据<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/jvm/jvm-select.html" class="nav-link sidebar-link sidebar-page" aria-label="jvm-select"><!---->jvm-select<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/jvm/SerialHeap.html" class="nav-link sidebar-link sidebar-page" aria-label="SerialHeap"><!---->SerialHeap<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/jvm/safepoint.html" class="nav-link sidebar-link sidebar-page" aria-label="safepoint"><!---->safepoint<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/jvm/jvm-select-use.html" class="nav-link sidebar-link sidebar-page" aria-label="生产使用"><!---->生产使用<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">多线程编程</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/languages/java/thread/java/juc/read-me.html" class="nav-link sidebar-link sidebar-page" aria-label="多线程编程"><!---->多线程编程<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/aos.html" class="nav-link sidebar-link sidebar-page" aria-label="exclusively"><!---->exclusively<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/atomic.html" class="nav-link sidebar-link sidebar-page" aria-label="cas"><!---->cas<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/aqs.html" class="nav-link sidebar-link sidebar-page" aria-label="aqs"><!---->aqs<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/blocking.html" class="nav-link sidebar-link sidebar-page" aria-label="LockSupport"><!---->LockSupport<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/clh.html" class="nav-link sidebar-link sidebar-page" aria-label="clh锁"><!---->clh锁<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/condition.html" class="nav-link sidebar-link sidebar-page" aria-label="Condition"><!---->Condition<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/future.html" class="nav-link sidebar-link sidebar-page" aria-label="FutureTask"><!---->FutureTask<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/daemon.html" class="nav-link sidebar-link sidebar-page" aria-label="daemon"><!---->daemon<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/thread-factory.html" class="nav-link sidebar-link sidebar-page" aria-label="ThreadFactory"><!---->ThreadFactory<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/rejected-execution-handler.html" class="nav-link sidebar-link sidebar-page" aria-label="ExecutionPolicy"><!---->ExecutionPolicy<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/work.html" class="nav-link sidebar-link sidebar-page" aria-label="Worker"><!---->Worker<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/thread-pool-executor.html" class="nav-link sidebar-link sidebar-page" aria-label="ThreadPoolExecutor"><!---->ThreadPoolExecutor<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/thread/java/juc/threadQ.html" class="nav-link sidebar-link sidebar-page" aria-label="线程池面试题"><!---->线程池面试题<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading active"><!----><span class="title">其他</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/languages/java/auto-box.html" class="nav-link sidebar-link sidebar-page" aria-label="自动装箱"><!---->自动装箱<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/languages/java/delay-queue.html" class="nav-link sidebar-link sidebar-page" aria-label="锁局部变量"><!---->锁局部变量<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="基于栈的指令集"><!---->基于栈的指令集<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#原文地址" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="原文地址"><!---->原文地址<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#虚拟机数据类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="虚拟机数据类型"><!---->虚拟机数据类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#基于堆栈的架构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="基于堆栈的架构"><!---->基于堆栈的架构<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#字节码探索" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="字节码探索"><!---->字节码探索<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#方法调用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="方法调用"><!---->方法调用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#创建实例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建实例"><!---->创建实例<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#另一种方式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="另一种方式"><!---->另一种方式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#结论" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="结论"><!---->结论<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/languages/java/heap-java.html" class="nav-link sidebar-link sidebar-page" aria-label="Heap源码"><!---->Heap源码<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">go</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/languages/go/heap-go.html" class="nav-link sidebar-link sidebar-page" aria-label="Heap源码"><!---->Heap源码<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">基本功</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/basic-skill/algorithms" class="title">算法</a><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/basic-skill/algorithms/sort/sort.html" class="title">排序</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/basic-skill/algorithms/sort/bubble-sort.html" class="nav-link sidebar-link sidebar-page" aria-label="冒泡排序"><!---->冒泡排序<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/sort/select-sort.html" class="nav-link sidebar-link sidebar-page" aria-label="选择排序"><!---->选择排序<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/sort/insert-sort.html" class="nav-link sidebar-link sidebar-page" aria-label="插入排序"><!---->插入排序<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/sort/merge-sort.html" class="nav-link sidebar-link sidebar-page" aria-label="归并排序"><!---->归并排序<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/sort/quick-sort.html" class="nav-link sidebar-link sidebar-page" aria-label="快速排序"><!---->快速排序<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">数据结构</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/basic-skill/algorithms/structure/union-find-structure.html" class="nav-link sidebar-link sidebar-page" aria-label="并查集"><!---->并查集<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/basic-skill/algorithms/tree/binary-tree-concept.html" class="title">Tree</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/basic-skill/algorithms/tree/pre-order.html" class="nav-link sidebar-link sidebar-page" aria-label="前序遍历"><!---->前序遍历<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/tree/binary-tree-algs4.html" class="nav-link sidebar-link sidebar-page" aria-label="二叉树-算法4"><!---->二叉树-算法4<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/tree/balanced-search-trees.html" class="nav-link sidebar-link sidebar-page" aria-label="2-3-搜索树"><!---->2-3-搜索树<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/heap/heap.html" class="nav-link sidebar-link sidebar-page" aria-label="Heap"><!---->Heap<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/basic-skill/algorithms/graphs/" class="title">图</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/basic-skill/algorithms/graphs/graph-concept.html" class="nav-link sidebar-link sidebar-page" aria-label="概念"><!---->概念<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/graphs/directed-graph.html" class="nav-link sidebar-link sidebar-page" aria-label="有向图"><!---->有向图<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/graphs/graph-search.html" class="nav-link sidebar-link sidebar-page" aria-label="搜索"><!---->搜索<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/graphs/minimum-spanning-tree.html" class="nav-link sidebar-link sidebar-page" aria-label="最小生成树"><!---->最小生成树<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/graphs/shortest-path-algnorithms.html" class="nav-link sidebar-link sidebar-page" aria-label="最短路径算法"><!---->最短路径算法<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">其他</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/basic-skill/algorithms/other/Edsger-Dijkstra.html" class="nav-link sidebar-link sidebar-page" aria-label="荷兰国旗"><!---->荷兰国旗<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/other/binary-Search.html" class="nav-link sidebar-link sidebar-page" aria-label="二分查找法"><!---->二分查找法<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/other/swap-or-exchange.html" class="nav-link sidebar-link sidebar-page" aria-label="交换还是移动？"><!---->交换还是移动？<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/algorithms/other/xor.html" class="nav-link sidebar-link sidebar-page" aria-label="Xor"><!---->Xor<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/basic-skill/design-pattern/" class="title">设计模式</a><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/basic-skill/design-pattern/reactor" class="title">Reactor</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/basic-skill/design-pattern/reactor/single.html" class="nav-link sidebar-link sidebar-page" aria-label="Single"><!---->Single<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/design-pattern/reactor/multiple.html" class="nav-link sidebar-link sidebar-page" aria-label="Multiple"><!---->Multiple<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">单例</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/basic-skill/design-pattern/create/singleton/" class="nav-link sidebar-link sidebar-page" aria-label="Singleton"><!---->Singleton<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/design-pattern/create/singleton/singleton.html" class="nav-link sidebar-link sidebar-page" aria-label="Spring单例bean对jvm的影响"><!---->Spring单例bean对jvm的影响<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">策略</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/basic-skill/design-pattern/policy/spring-error-demo.html" class="nav-link sidebar-link sidebar-page" aria-label="错误案例"><!---->错误案例<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/design-pattern/policy/spring-policy.html" class="nav-link sidebar-link sidebar-page" aria-label="策略模式"><!---->策略模式<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/design-pattern/policy/spring-fly-weight.html" class="nav-link sidebar-link sidebar-page" aria-label="策略+享元"><!---->策略+享元<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a href="/basic-skill/design-pattern/interpreter/interpreter-pattern.html" class="nav-link sidebar-link sidebar-page" aria-label="interpreter"><!---->interpreter<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/basic-skill/design-pattern/structure/decorator/concept.html" class="title">装饰者</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/basic-skill/design-pattern/structure/decorator/decorator-java.html" class="nav-link sidebar-link sidebar-page" aria-label="Decorator-Java"><!---->Decorator-Java<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/design-pattern/structure/decorator/decorator-netty.html" class="nav-link sidebar-link sidebar-page" aria-label="Decorator-Netty"><!---->Decorator-Netty<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/design-pattern/structure/decorator/decorator-hystrix.html" class="nav-link sidebar-link sidebar-page" aria-label="Decorator-Hystrix"><!---->Decorator-Hystrix<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">计算机网络</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/basic-skill/network/tree-shake-hands.html" class="nav-link sidebar-link sidebar-page" aria-label="三次握手"><!---->三次握手<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/basic-skill/network/four-wave.html" class="nav-link sidebar-link sidebar-page" aria-label="四次挥手"><!---->四次挥手<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><!----><span class="title">项目</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/project/selectAll/rbac/" class="nav-link sidebar-link sidebar-page" aria-label="RBAC"><!---->RBAC<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/project/selectAll/nextflow.html" class="nav-link sidebar-link sidebar-page" aria-label="权限+流程"><!---->权限+流程<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/project/cicd/docker/" class="nav-link sidebar-link sidebar-page" aria-label="docker支持语言一览"><!---->docker支持语言一览<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/project/cicd/docker/buildimage.html" class="nav-link sidebar-link sidebar-page" aria-label="docker镜像构建"><!---->docker镜像构建<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><!----><a href="/tools/" class="title">工具篇</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/tools/draw.html" class="nav-link sidebar-link sidebar-page" aria-label="画图工具"><!---->画图工具<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/flowable.html" class="nav-link sidebar-link sidebar-page" aria-label="工作流设计"><!---->工作流设计<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/linked/" class="nav-link sidebar-link sidebar-page" aria-label="资源归档"><!---->资源归档<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->基于栈的指令集</h1><div class="page-info"><!----><!----><span class="page-word-info" aria-label="字数🔠" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 3907 字</span><meta property="wordCount" content="3907"></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 13 分钟</span><meta property="timeRequired" content="PT13M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#原文地址" class="router-link-active router-link-exact-active toc-link level2">原文地址</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#虚拟机数据类型" class="router-link-active router-link-exact-active toc-link level2">虚拟机数据类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#基于堆栈的架构" class="router-link-active router-link-exact-active toc-link level2">基于堆栈的架构</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#字节码探索" class="router-link-active router-link-exact-active toc-link level2">字节码探索</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#方法调用" class="router-link-active router-link-exact-active toc-link level2">方法调用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#创建实例" class="router-link-active router-link-exact-active toc-link level2">创建实例</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#另一种方式" class="router-link-active router-link-exact-active toc-link level2">另一种方式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/languages/java/introduction-to-java-bytecode.html#结论" class="router-link-active router-link-exact-active toc-link level2">结论</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="基于栈的指令集" tabindex="-1"><a class="header-anchor" href="#基于栈的指令集" aria-hidden="true">#</a> 基于栈的指令集</h1><h2 id="原文地址" tabindex="-1"><a class="header-anchor" href="#原文地址" aria-hidden="true">#</a> <a href="https://dzone.com/articles/introduction-to-java-bytecode" target="_blank" rel="noopener noreferrer">原文地址<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h2><p>Java 字节码简介继续深入研究 JVM 内部和 Java 字节码，以了解如何分解文件以进行深入检查。</p><p>读编译后的字节码是很乏味的，但是对 Java 开发者很有用。为什么还要第一时间学习这些低级内容呢？这是我上周发生的情况，我在我的电脑上对一些代码进行了变更， 编译成 Jar 并部署到服务器去测试一个潜在的性能问题。不幸得是这些代码没有提交到版本控制系统， 出于一些其他原因，我电脑对代码的改变被删除了，并且找不到轨迹，过了几个月后，我需要在源代码上进行变更(这些代码花了很大力气编写)，但是我找不到它们了!</p><p>幸运的是这些被编译的代码还存在远程的服务器上面，所以我松了一口了气，我从服务器拉下了 Jar 文件并用反编译工具打开它。 有一个问题：反编译 GUI 不是一个完美的工具，而且有很多 Classes 没有在 jar 文件中， 出于某些原因，当我打开特定的 class 去看反编译代码时引起了 UI 的一个 bug，然后我把反编译工具丢进了垃圾箱！</p><p>绝望的时候采取绝望的措施，幸好，我熟悉原生字节码，而且我宁愿花费一些时间手动反编译这些代码片段而不是研究更改并再次测试它们。 由于我还记得这些代码位置，读取字节码有助于我找到明确的更改并再次构造到源代码（我确保从错误中吸取教训，并保护它们）。</p><p>字节码的好处是你学习它的语法一次，适用于 Java 所有平台，因为它是代码的中间表示，而不是 cpu 下执行的机器语言， 此外，字节码由于 Jvm 的结构比原生机器语言更加简单，简化了指令集。更好的事情就是 Oracle 文档中包含这些指令。</p><p>在学习字节码指令之前，让我们熟悉一些有关 JVM 的先决条件。</p><h2 id="虚拟机数据类型" tabindex="-1"><a class="header-anchor" href="#虚拟机数据类型" aria-hidden="true">#</a> 虚拟机数据类型</h2><p>Java 是静态类型语言，这会影响字节码指令集的设计，从而使一条指令的操作特定的类型，例如，有一个加法指令将两个数字相加： <code>iadd， ladd， fadd， dadd</code> . 它们的操作数的类型类型分别为 <code>int，long，float，double</code> 。大部分字节码根据操作数类型具有不同形式但相同功能的特征。</p><p>数据类型在 JVM 定义为:</p><ol><li>主要类型</li></ol><ul><li>数字类型：<code>byte</code>(8 位 2 的补码)，<code>short</code>(16 位 2 的补码)， <code>int</code> (32 位 2 的补码)， <code>long</code> (64 位 2 的补码） <code>char</code> (16 位 无符号编码）， <code>float</code> (32 位 IEEE 754 单精度 FP)， <code>double</code> (64 位 IEEE 754 双精度 FP)</li><li><code>boolean</code> 类型</li><li><code>returnAddress</code> 指示指针</li></ul><ol start="2"><li>引用类型</li></ol><ul><li>Class 类型</li><li>数组类型</li><li>接口类型</li></ul><p><code>boolean</code> 类型被字节码限制，例如，这里没有指令集直接操作 <code>boolean</code> 类型， <code>Boolean</code> 值将有编译器转换成 <code>int</code> ，并使用相应的 <code>int</code> 指令。 Java 开发者应该很熟悉上面的类型，除了返回地址，没有等效的编程语言类型。</p><h2 id="基于堆栈的架构" tabindex="-1"><a class="header-anchor" href="#基于堆栈的架构" aria-hidden="true">#</a> 基于堆栈的架构</h2><p>字节码指令集的简单性很大归功与 Sun 设计了基于基于堆栈的 VM 体系结构，而不是基于寄存器的。这里有一系列的内存组建应用与 Jvm 进程， 从本质上将只有 Jvm 堆栈需要被检查遵循字节码指令：</p><p><strong>PC 寄存器</strong>：对于 Java 程序的每一个运行的线程，PC 寄存器都存储当前指令的地址。</p><p><strong>虚拟机栈</strong>：对于每一个线程，栈都分配本地向量表，方法参数和返回值。这是显示 3 个线程的堆栈插图。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKkAAADcCAIAAACEWBYKAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJkSURBVHja7d3BjYJAFIBhx1ADLdAHHVAIXXEldGBrbw962U020cksM+x838WTieHPQ0bUSRFxO9e2bfu+3yhnnud1XT991v38Fyp8cY/HI+NZQ62XexyHZkUsy5L3xLtj1y3ttUd7+pFzrVdkkZZ9hWKRVnPuLdIaWaRVmHuLtEYWad7v0R7t0R7t0R7t0V57h0B7ujNk35hxM+Y3VW7M5My9GzPFVbkxkzP3zwc3Zkq50OnQ+71rPbRHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7TnfYND0Ijzf8hn7s09tWX/FNq+GWiP9miP9rjO/6+LdXOPub/UYt2eKWiP9miP9miP9miP9mjPu16f6doApce5Tyk5Cp3OfUTYM6Uge6agPdqjPdqjPdqjPdqjPdqjPdqjPdqjPdqjPdqjPdqjvfZoj/Zoj/Zoj/Zoj/Zoj/Zoj/Zoj/Zoj/ZUYa+kP2GPNMx9f+yRhnM+2qM92qM92qM92qM92qM92qM92qM92qM92vON7+u14vxv7Zl7c09tH321t8gJw9y71kN7tEd7tEd7tEd7tEd7tEd72jWklCLiEv8LReG5jwhHodO5fz5k3zzmhwudQb3fu9ZDe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7RHe7TH3gntsGcKOcZxNPcXdv7f3ph713poj/ZY43GRBZu572uRZu4t2Mw92qM92qM92qO99g6B9nTn9bmefbJ6nPtpmhyFsqp8OJ8h2SPN+z3aoz3aoz3aoz3aoz3aoz3a06wvwLlaY5EsEE8AAAAASUVORK5CYII=" alt="An image"></p><p><strong>堆内存</strong>：内存共享所有线程和被加载的对象（实例对象和数组），对象的回收被垃圾回收器管理。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAACCCAIAAACl/u9EAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAI3SURBVHja7dw9buJQFIZhL/ECFj+iQkK0KaGYHonp2AJrYDvsgGY2kGmiCKWKr28cX5/n3QE8QrI/pNO8K0bN7XZLmnrX67XxLQTpQ/qfphtp0iIt0iIt0iIt0iIt0qRJkxZpkRZpffZ4PPb7fcF/nUmHYE4pPZ9P0iNl3m635/P5b26Xy2W32/lNR2GezWakQzCvVivSIZg3mw3pMTK3bXs6nf706Asz6XFV9kn7lZn0GCeLde/m83lKablcbl4iPTrpt96t1+uU0usPeuzSZacD0iOVLr4QfWceIj20dJGXjYx5iPSg0mWZO81DpIeTLs7caR4iPZD0TzB3+pCkh5AutRD1mYdIDyFd8Ek7ex4iPYR0kYWo5zxEejjp3/2QpEmTJl2DdNu2pKcv/cl8v99JT1a6KzPpKqUzmEnXJ71YLDKYSdcnncdMejjpgmUwk65POo+ZdKBIkx63dKd5SLVK571Qkq5MGnMIacwhpLPnIVUmjbkC6V/fDVSTNOZRS4u0SIu0SIu0SJMWaZEWaZEWaZEWaZEWadIiLdIi3a9ol9+DSge8/B5ROubl93DSYS+/x5KOfPk9kHTwy+9RpF1+jyLt8nsUaZffY0m7dUSaNGnSpEmTJk2aNGnSpEmTJk2aNGnSpEm7/B5d2q3oENKYQ0hjDiHt8nsUacwVSDsJThrzVKRFWqRFWqRJi7RIi7RIi7RIi7RIizRpkRZpkRZpkdZPS2vyNcfj0bcw+Q6HQ/OuGP0HsTxie4Z5vrcAAAAASUVORK5CYII=" alt="An image"></p><p><strong>方法区</strong>: 每一个被加载的 class，它存储方法代码和符号表。(例如引用类型和方法) 和长量池。</p><p><img src="/assets/method_area-42682b3e.png" alt="An image"></p><p>JVM 栈由栈帧组成，当方法调用时候推入栈帧，并在方法完成时（通过正常返回或引发异常）从堆栈中弹出。每个栈帧还包括:</p><ol><li>局部变量表，索引从 0~length-1，长度由编辑器计算，局部向量表可以保存任意类型，但是<code>long</code>和<code>double</code>除外，因为它占两个位置。</li><li>一个操作栈用于储存用于存储用作指令的操作数，将参数推送到方法调用。</li></ol><p><img src="/assets/stack_frame_zoom-8853c36c.png" alt="An image"></p><h2 id="字节码探索" tabindex="-1"><a class="header-anchor" href="#字节码探索" aria-hidden="true">#</a> 字节码探索</h2><p>关于 JVM 内部想法，我们可以看一些字节码基础案例，这些案例生成于简单代码。在 Java class 文件中每一个访达都会有一些代码段， 它包含一系列的指令集，主要包含以下格式:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>opcode <span class="token punctuation">(</span><span class="token number">1</span> <span class="token keyword">byte</span><span class="token punctuation">)</span>      operand1 <span class="token punctuation">(</span>optional<span class="token punctuation">)</span>      operand2 <span class="token punctuation">(</span>optional<span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>该指令由一个字节的操作码和零个或多个包含要操作的数据去操作。 当前执行方法的栈帧，一个指令可以从操作栈中推入或者推出值，而且它可以潜在的加载或存储值到局部变量表，让我门来看一个简单的案例:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为了能够打印被编辑的 class(假定这个文件是 <code>Test.class</code> )字节码结果，我们可以使用 javap 工具:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>javap <span class="token operator">-</span>v <span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token keyword">class</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>我们会得到下面字节码</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   descriptor<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
   flags<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token number">0x0009</span><span class="token punctuation">)</span> <span class="token constant">ACC_PUBLIC</span>， <span class="token constant">ACC_STATIC</span>
   <span class="token class-name">Code</span><span class="token operator">:</span>
   stack<span class="token operator">=</span><span class="token number">2</span>， locals<span class="token operator">=</span><span class="token number">4</span>， args_size<span class="token operator">=</span><span class="token number">1</span>
   <span class="token number">0</span><span class="token operator">:</span> iconst_1
   <span class="token number">1</span><span class="token operator">:</span> istore_1
   <span class="token number">2</span><span class="token operator">:</span> iconst_2
   <span class="token number">3</span><span class="token operator">:</span> istore_2
   <span class="token number">4</span><span class="token operator">:</span> iload_1
   <span class="token number">5</span><span class="token operator">:</span> iload_2
   <span class="token number">6</span><span class="token operator">:</span> iadd
   <span class="token number">7</span><span class="token operator">:</span> istore_3
   <span class="token number">8</span><span class="token operator">:</span> <span class="token keyword">return</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们能看到 <code>main</code> 的签名，形容和表明方法需要一个字符串数组( <code>[Ljava/lang/String;</code> )，并且有一个返回类型( <code>V</code> )。 后续有一系列的方法形容，例如公有的( <code>ACC_PUBLIC</code> )和静态的( <code>ACC_STATIC</code> )。</p><p>更重要的部分是 <code>Code</code> ，它包含了方法的说明和信息，例如操作数栈的最大深度(stack=2)，和一定数量的局部变量表被分配在栈帧中(locals=4)， 以上指令引用了上面的除 0 索引外的所有位置，它包含了参数的引用，其他 3 个局部变量对应源码中的参数 <code>a，b，c</code> 。</p><p>从 0-8 的指令集操作如下:</p><p><code>iconst_1</code> : 推送常数 1 到操作数栈。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYUAAACiCAIAAAAhn0YlAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMXSURBVHja7dsxaBNhGIDhnNzQIQ5CHYQMbREy2MUlU12CQ0Ewgq2u7WBQqMQlc9tFQReDHUJA7GZtKphNpQhCF4VsZiiEWrDQwYKDXUTkHHRx8oy0uUueZyqZji/5Xv6fJsGN+2vd/cMMMZw9k21Ur5sDf1V+8Mxa9bBWYXf/8M3N94YSR7FeMATisFa9rdUJ4wASQo8APQLQI0CPAPQI0CMAPQL0CECPAD0C0CNAjwD0CNAjAD0C9AhAjwA9AtAjAD0C9AhAjwA9AtAjQI8A9AjQIwA9AvQIQI+Af9WsNIJ8I7jU7iT1CUNvEgyBnWv5zWbin1KPYNC93AwqO+5rQJ91Vpq/YzR98cPtU3oE9NfE+nY5qk0k/0Hd12CQnVuYjRZS87TOR4AeAegRoEcAegToEYAeAXoEoEdA2vl+Ngyyzkpz8tGXP17qtifz7V9/ztbK69PORwDORzBU/H4NQI8APQLQI0CPAPQI0CMAPQL0CECPAD0C0CMAPQL0CECPAD0C0CNAjwD0CNAjAD0C9AhAjwA9glRY3dha3dgyBz2C/tvdO5ivPh6/UFUlPQJVQo9AldIpNIJkCsbnDeGIqrRcay1WSnMzUwaSuI/95buvTp7OGUQcP75/e3rrvB4NhrHc6NFVqXTvtbXqYa3c1xjes9Lbd9u7ewdG4b4G/TQ3M7VYKY3lRo0iWT36+vlT6+pzg4ijWC9kMsd0X4s+PjHw/7T08MVyrdWXElmr3tbK+QhnItzXQInQI5QIPYJjtXTniiGki//3A3oEoEeAHgHoEaBHAHoE6BGAHgF6BKBHgB4B6BGgRwB6BOgRgB4BegSgRwB6BOgRgB4BegSgR4AeAegRoEcAegToEYAeAXoEoEeAHgHoEaBHAHoE6BGAHgHoEaBHAHoE6BGAHgF6BKBHgB4B6BGgRwB6BOgRgB4BegSgR4AeAegRoEcAegSgR4AeAegRoEcAegToEYAeAXoEoEeAHgHoEaBHAHoE6BGAHgHDKcyOhMV6wSDiyI6EhkDMj4q16mGtgiiKTARwXwPQIyB5fgIEHJZBKgpPowAAAABJRU5ErkJggg==" alt="An image"></p><p><code>istore_1</code> : 从操作数栈推出(一个 int 值)并储存到局部变量表索引 1 处，它对应的是变量 a。</p><p><img src="data:image/png;base64,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" alt="An image"></p><p><code>iconst_2</code> : 推送数字常量 2 到操作数栈。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYUAAACiCAIAAAAhn0YlAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAOSSURBVHja7dw/SJRhHMDx9+IGBxsObAgcVA4cdAnByRZxEIQM8mzVISkobHH2bimoJbFBhMitP2eQg3DFEQQuBbdpIByXkOCQcEMuEXHhSaA0dFx573ve54OL3vLy454vz3O+98ZuPHhe3DsIqEHyYvvy3HVz4K9mHr6wrOpYVvHi3sG7mx8NpRbDS4OGQC0sq/qW1TnjACJCjwA9AtAjQI8A9AjQIwA9AvQIQI8APQLQI0CPAPQI0CMAPQL0CECPAD0C0CMAPQL0CECPAD0C0CNAjwD0CNAjAD0C9Ajg/4kbAZxxuXxstnTs90R6PTWftD8CGqo02bt8MkZBEJTTY8v9j8t6BDRQsfwpCILRkcr2zO+fkVT1la3FfKaoR0DDJAc2t2cqCz3H/tTzcn2gr7pLyuYit0XSI2i1SPWkkhG9ND0C9AgIRbGUPfzkKJEaTegREKbsYmGremqbiN6pTY+gleTyk7nqLUgLR59q6xEQjtJk9V6kvjsj7ocEQo1Rbz5bvR1p83YimpeoR9BaMTp5O5IeAaHEKDmwGeEY6RG0UozWo/gZth5BiyhnxpomRp43AmdarpA++tJssdDfW/jj5cg9eMT+CLA/Ak7b4ZNGmul67Y8APQLQI0CPAPQI0CMAPQL0CECPAD0C0CNAjwD0CNAjAD0C9AhAjwA9AtAjAD0C9AhAjwA9AtAjWtbK6sbK6oY56BGEb2d3f3ruSfflOVXSI1Al9AhUqTnFjSCaYt3ThnBKVcosrM3Pjk9NDBlI5N72V+69OX+h0yBq8fPH92e3LunR2dDV2XF6VRq//9ayqmNZOa/Runul9x+2d3b3jcJ5DcI0NTE0Pzve1dlhFNHq0bevX9auvTKIWgwvDQZBg85rlc9PDfwfpR+9ziyshVIiy6q+ZWV/hD0RzmugROgRSoQeQUOl7141hObi//2AHgHoEaBHAHoE6BGAHgF6BKBHgB4B6BGgRwB6BOgRgB4BegSgR4AeAegRgB4BegSgR4AeAegRoEcAegToEYAeAXoEoEeAHgHoEaBHAHoE6BGAHgF6BKBHAHoE6BGAHgF6BKBHgB4B6BGgRwB6BOgRgB4BegSgR4AeAegRoEcAegToEYAeAegRoEcAegToEYAeAXoEoEeAHgHoEaBHAHoE6BGAHgF6BKBHQGuKt7fFh5cGDaIW7W1xQ6DGt4plVceyilUqFRMBnNcA9AiInl+kds6GGlGxjwAAAABJRU5ErkJggg==" alt="An image"></p><p><code>istore_2</code> : 从操作数栈推出 int 并储存到局部变量索引 2，它对应向量 b。</p><p><img src="data:image/png;base64,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" alt="An image"></p><p><code>iload_1</code> : 将第二个 int 型本地变量推送至栈顶。</p><p><img src="/assets/iload_1-91c0774e.png" alt="An image"></p><p><strong><code>iload_2</code> 将第三个 int 型本地变量推送至栈顶</strong><strong>这里请注意原文与原图不符</strong></p><p><img src="/assets/iload_2-83891541.png" alt="An image"></p><p><code>iadd</code> : 将栈顶两 int 型数值相加并将结果压入栈顶。</p><p><img src="/assets/iload_2-83891541.png" alt="An image"></p><p><code>istore_3</code> : 从操作数栈推出 int 并储存到局部变量索引 3，它对应向量 c。</p><p><img src="data:image/png;base64,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" alt="An image"></p><p><code>return</code> : 从 void 方法返回。</p><p>上面的指令集都是都仅有一个操作码，操作码精确的指示了 JVM 要执行的操作。</p><h2 id="方法调用" tabindex="-1"><a class="header-anchor" href="#方法调用" aria-hidden="true">#</a> 方法调用</h2><p>在上面试例中，这里只有一个主方法，让我们假定我们需要更京西的计算来计算变量 c，并且我们决定将其放到 calc 方法中:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token function">calc</span><span class="token punctuation">(</span>a， b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token keyword">int</span> a， <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>a， <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>b， <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>让我们看字节码结果:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  descriptor<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
  flags<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token number">0x0009</span><span class="token punctuation">)</span> <span class="token constant">ACC_PUBLIC</span>， <span class="token constant">ACC_STATIC</span>
  <span class="token class-name">Code</span><span class="token operator">:</span>
    stack<span class="token operator">=</span><span class="token number">2</span>， locals<span class="token operator">=</span><span class="token number">4</span>， args_size<span class="token operator">=</span><span class="token number">1</span>
      <span class="token number">0</span><span class="token operator">:</span> iconst_1
      <span class="token number">1</span><span class="token operator">:</span> istore_1
      <span class="token number">2</span><span class="token operator">:</span> iconst_2
      <span class="token number">3</span><span class="token operator">:</span> istore_2
      <span class="token number">4</span><span class="token operator">:</span> iload_1
      <span class="token number">5</span><span class="token operator">:</span> iload_2
      <span class="token number">6</span><span class="token operator">:</span> invokestatic  #<span class="token number">2</span>         <span class="token comment">// Method calc:(II)I</span>
      <span class="token number">9</span><span class="token operator">:</span> istore_3
      <span class="token number">10</span><span class="token operator">:</span> <span class="token keyword">return</span>
  <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token keyword">int</span>， <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  descriptor<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token constant">II</span><span class="token punctuation">)</span><span class="token class-name">I</span>
  flags<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token number">0x0008</span><span class="token punctuation">)</span> <span class="token constant">ACC_STATIC</span>
  <span class="token class-name">Code</span><span class="token operator">:</span>
    stack<span class="token operator">=</span><span class="token number">6</span>， locals<span class="token operator">=</span><span class="token number">2</span>， args_size<span class="token operator">=</span><span class="token number">2</span>
      <span class="token number">0</span><span class="token operator">:</span> iload_0
      <span class="token number">1</span><span class="token operator">:</span> i2d
      <span class="token number">2</span><span class="token operator">:</span> ldc2_w        #<span class="token number">3</span>         <span class="token comment">// double 2.0d</span>
      <span class="token number">5</span><span class="token operator">:</span> invokestatic  #<span class="token number">5</span>         <span class="token comment">// Method java/lang/Math.pow:(DD)D</span>
      <span class="token number">8</span><span class="token operator">:</span> iload_1
      <span class="token number">9</span><span class="token operator">:</span> i2d
      <span class="token number">10</span><span class="token operator">:</span> ldc2_w        #<span class="token number">3</span>         <span class="token comment">// double 2.0d</span>
      <span class="token number">13</span><span class="token operator">:</span> invokestatic  #<span class="token number">5</span>         <span class="token comment">// Method java/lang/Math.pow:(DD)D</span>
      <span class="token number">16</span><span class="token operator">:</span> dadd
      <span class="token number">17</span><span class="token operator">:</span> invokestatic  #<span class="token number">6</span>         <span class="token comment">// Method java/lang/Math.sqrt:(D)D</span>
      <span class="token number">20</span><span class="token operator">:</span> d2i
      <span class="token number">21</span><span class="token operator">:</span> ireturn
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>与主方法唯一的差别是它没有 <code>iadd</code> 指令，我们可以看到一个 <code>invokestatic</code> 指令，它只是调用了静态方法 <code>calc</code> 。 关键要注意操作数栈包含了 <code>calc</code> 方法的两个参数，换句话说，调用方法将被调用方法的所有参数以正确的顺序压入操作数堆栈，从而准备这些参数。 <code>invokestatic</code> (类似的调用指令，后续在讲)随后讲弹出这些参数，一些新的栈帧将会被调用方法创建，并且参数会被放到局部变量表中。</p><p>我们注意到 <code>invokestatic</code> 指令使用了 3 个字节进行寻址， 它从 6 到 9，这是因为，它与我们之前看到的指令不同， <code>invokestatic</code> 包含两个额外的字节构造方法引用(额外的操作码)。 这个引用被展示为 <code>#2</code> ，它是 <code>calc</code> 方法的符号引用，可以从前面讲到的常量池找到。</p><p>显然，其他新信息是 <code>calc</code> 方法本身的代码。它先将第一个 integer 参数加载到操作数栈( <code>iload_0</code> )。 下一个指令， <code>i2d</code> ，扩大它的范围将它转换成一个 double，并将结果推到操作数栈顶。</p><p>下一个指令推送一个 double 常量 <code>2.0d</code> (从常量池获取)到操作数栈，然后使用操作数栈准备的两个操作数值调用 <code>Math.pow</code> 静态方法( <code>calc</code> 的第一个参数和常量 <code>2.0d</code> )， 当 <code>Math.pow</code> 方法返回，它的结果会被储存到调用程序的操作数栈中，可以在下面说。</p><p><img src="data:image/png;base64,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" alt="An image"></p><p>相同的过程适用于计算 <code>Math.pow（b，2）</code> :</p><p><img src="/assets/math_pow21-7d2668d2.png" alt="An image"></p><p>下一个指令， <code>dadd</code> ，推出两个中间结果，进行相加，并将结果退回到栈顶，最终，静态调用调用数学平方，然后使用缩小转换（ <code>d2i</code> ）将结果从 double 转换为 int。 生成的 int 返回到 main 方法，该方法将其存储回 <code>c</code> （ <code>istore_3</code> ）。</p><h2 id="创建实例" tabindex="-1"><a class="header-anchor" href="#创建实例" aria-hidden="true">#</a> 创建实例</h2><p>让我们修改示例，并引入一个 <code>Point</code> 类来封装 XY 坐标。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Point</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">1</span>， <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Point</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">5</span>， <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">int</span> c <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
     <span class="token keyword">int</span> x， y<span class="token punctuation">;</span>
     <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token keyword">int</span> x， <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token class-name">Point</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">int</span> width <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span> length <span class="token operator">*</span> width<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>主要方法的字节码如下:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   descriptor<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
   flags<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token number">0x0009</span><span class="token punctuation">)</span> <span class="token constant">ACC_PUBLIC</span>， <span class="token constant">ACC_STATIC</span>
   <span class="token class-name">Code</span><span class="token operator">:</span>
     stack<span class="token operator">=</span><span class="token number">4</span>， locals<span class="token operator">=</span><span class="token number">4</span>， args_size<span class="token operator">=</span><span class="token number">1</span>
        <span class="token number">0</span><span class="token operator">:</span> <span class="token keyword">new</span>           #<span class="token number">2</span>       <span class="token comment">// class test/Point</span>
        <span class="token number">3</span><span class="token operator">:</span> dup
        <span class="token number">4</span><span class="token operator">:</span> iconst_1
        <span class="token number">5</span><span class="token operator">:</span> iconst_1
        <span class="token number">6</span><span class="token operator">:</span> invokespecial #<span class="token number">3</span>       <span class="token comment">// Method test/Point.&quot;&lt;init&gt;&quot;:(II)V</span>
        <span class="token number">9</span><span class="token operator">:</span> astore_1
       <span class="token number">10</span><span class="token operator">:</span> <span class="token keyword">new</span>           #<span class="token number">2</span>       <span class="token comment">// class test/Point</span>
       <span class="token number">13</span><span class="token operator">:</span> dup
       <span class="token number">14</span><span class="token operator">:</span> iconst_5
       <span class="token number">15</span><span class="token operator">:</span> iconst_3
       <span class="token number">16</span><span class="token operator">:</span> invokespecial #<span class="token number">3</span>       <span class="token comment">// Method test/Point.&quot;&lt;init&gt;&quot;:(II)V</span>
       <span class="token number">19</span><span class="token operator">:</span> astore_2
       <span class="token number">20</span><span class="token operator">:</span> aload_1
       <span class="token number">21</span><span class="token operator">:</span> aload_2
       <span class="token number">22</span><span class="token operator">:</span> invokevirtual #<span class="token number">4</span>       <span class="token comment">// Method test/Point.area:(Ltest/Point;)I</span>
       <span class="token number">25</span><span class="token operator">:</span> istore_3
       <span class="token number">26</span><span class="token operator">:</span> <span class="token keyword">return</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里遇到的新的指令 <code>new，dup</code> 和 <code>invokespecial</code> 。类似与编程语言的新的运算符， <code>new</code> 指令创建传递给它的操作数中指定类型的对象( <code>Point</code> class 的符号引用) 对象分配在堆内存上，并且将对象引用推动到操作数栈上。</p><p>dup 指令复制操作数栈顶的值，这意味着现在我们堆栈顶部有两个 <code>Point</code> 对象。 接下来的三条指令将构造函数的参数（用于初始化对象）压入操作数堆栈，然后调用与构造函数相对应的特殊初始化方法， 下一个方法是将字段 x 和 y 初始化。方法完成后，将使用前三个操作数堆栈值，剩下的就是对创建对象的原始引用（到目前为止，该对象已成功初始化）。</p><p><img src="data:image/png;base64,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" alt="An image"></p><p>接下来，astore_1 弹出该 Point 引用并将其分配给索引 1 处的局部变量（ <code>astore_1</code> 中的 a 表示这是一个引用值）。</p><p><img src="/assets/init_store-8ae9781c.png" alt="An image"></p><p>重复相同的创建和初始化 Point，并将它赋于到 b。</p><p><img src="data:image/png;base64,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" alt="An image"></p><p><img src="/assets/init_store2-df56d406.png" alt="An image"></p><p>最后一步加载两个 Point 对象引用到局部变量表索引 1 和 2 处(分别使用 <code>aload_1</code> 和 <code>aload_2</code> )， 并且使用 <code>invokevirtual</code> 调用面积计算方法，它根据对象的实际类型处理将调用分配给适当的方法。 例如，如果变量 a 包含扩展 <code>Point</code> 的 <code>SpecialPoint</code> 类型的实例，并且子类型覆盖 area 方法，则将调用重写方法。 在这种情况下，如果没有子类，因此仅一个区域方法可用。</p><h2 id="另一种方式" tabindex="-1"><a class="header-anchor" href="#另一种方式" aria-hidden="true">#</a> 另一种方式</h2><p>您无需掌握每条指令的理解和确切的执行流程，就可以根据手头的字节码了解程序的功能。 例如，以我为例，我想检查代码是否使用 Java 流读取文件，以及该流是否已正确关闭。现在给出以下字节码， 相对容易地确定确实使用了流，并且很可能作为 <code>try-with-resources</code> 语句的一部分将其关闭。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Exception</span><span class="token punctuation">;</span>
  descriptor<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
  flags<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token number">0x0009</span><span class="token punctuation">)</span> <span class="token constant">ACC_PUBLIC</span>， <span class="token constant">ACC_STATIC</span>
  <span class="token class-name">Code</span><span class="token operator">:</span>
    stack<span class="token operator">=</span><span class="token number">2</span>， locals<span class="token operator">=</span><span class="token number">8</span>， args_size<span class="token operator">=</span><span class="token number">1</span>
       <span class="token number">0</span><span class="token operator">:</span> ldc           #<span class="token number">2</span>                  <span class="token comment">// class test/Test</span>
       <span class="token number">2</span><span class="token operator">:</span> ldc           #<span class="token number">3</span>                  <span class="token comment">// String input.txt</span>
       <span class="token number">4</span><span class="token operator">:</span> invokevirtual #<span class="token number">4</span>                  <span class="token comment">// Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;</span>
       <span class="token number">7</span><span class="token operator">:</span> invokevirtual #<span class="token number">5</span>                  <span class="token comment">// Method java/net/URL.toURI:()Ljava/net/URI;</span>
      <span class="token number">10</span><span class="token operator">:</span> invokestatic  #<span class="token number">6</span>                  <span class="token comment">// Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;</span>
      <span class="token number">13</span><span class="token operator">:</span> astore_1
      <span class="token number">14</span><span class="token operator">:</span> <span class="token keyword">new</span>           #<span class="token number">7</span>                  <span class="token comment">// class java/lang/StringBuilder</span>
      <span class="token number">17</span><span class="token operator">:</span> dup
      <span class="token number">18</span><span class="token operator">:</span> invokespecial #<span class="token number">8</span>                  <span class="token comment">// Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V</span>
      <span class="token number">21</span><span class="token operator">:</span> astore_2
      <span class="token number">22</span><span class="token operator">:</span> aload_1
      <span class="token number">23</span><span class="token operator">:</span> invokestatic  #<span class="token number">9</span>                  <span class="token comment">// Method java/nio/file/Files.lines:(Ljava/nio/file/Path;)Ljava/util/stream/Stream;</span>
      <span class="token number">26</span><span class="token operator">:</span> astore_3
      <span class="token number">27</span><span class="token operator">:</span> aconst_null
      <span class="token number">28</span><span class="token operator">:</span> astore        <span class="token number">4</span>
      <span class="token number">30</span><span class="token operator">:</span> aload_3
      <span class="token number">31</span><span class="token operator">:</span> aload_2
      <span class="token number">32</span><span class="token operator">:</span> invokedynamic #<span class="token number">10</span>，  <span class="token number">0</span>             <span class="token comment">// InvokeDynamic #0:accept:(Ljava/lang/StringBuilder;)Ljava/util/function/Consumer;</span>
      <span class="token number">37</span><span class="token operator">:</span> invokeinterface #<span class="token number">11</span>，  <span class="token number">2</span>           <span class="token comment">// InterfaceMethod java/util/stream/Stream.forEach:(Ljava/util/function/Consumer;)V</span>
      <span class="token number">42</span><span class="token operator">:</span> aload_3
      <span class="token number">43</span><span class="token operator">:</span> ifnull        <span class="token number">131</span>
      <span class="token number">46</span><span class="token operator">:</span> aload         <span class="token number">4</span>
      <span class="token number">48</span><span class="token operator">:</span> ifnull        <span class="token number">72</span>
      <span class="token number">51</span><span class="token operator">:</span> aload_3
      <span class="token number">52</span><span class="token operator">:</span> invokeinterface #<span class="token number">12</span>，  <span class="token number">1</span>           <span class="token comment">// InterfaceMethod java/util/stream/Stream.close:()V</span>
      <span class="token number">57</span><span class="token operator">:</span> <span class="token keyword">goto</span>          <span class="token number">131</span>
      <span class="token number">60</span><span class="token operator">:</span> astore        <span class="token number">5</span>
      <span class="token number">62</span><span class="token operator">:</span> aload         <span class="token number">4</span>
      <span class="token number">64</span><span class="token operator">:</span> aload         <span class="token number">5</span>
      <span class="token number">66</span><span class="token operator">:</span> invokevirtual #<span class="token number">14</span>                 <span class="token comment">// Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V</span>
      <span class="token number">69</span><span class="token operator">:</span> <span class="token keyword">goto</span>          <span class="token number">131</span>
      <span class="token number">72</span><span class="token operator">:</span> aload_3
      <span class="token number">73</span><span class="token operator">:</span> invokeinterface #<span class="token number">12</span>，  <span class="token number">1</span>           <span class="token comment">// InterfaceMethod java/util/stream/Stream.close:()V</span>
      <span class="token number">78</span><span class="token operator">:</span> <span class="token keyword">goto</span>          <span class="token number">131</span>
      <span class="token number">81</span><span class="token operator">:</span> astore        <span class="token number">5</span>
      <span class="token number">83</span><span class="token operator">:</span> aload         <span class="token number">5</span>
      <span class="token number">85</span><span class="token operator">:</span> astore        <span class="token number">4</span>
      <span class="token number">87</span><span class="token operator">:</span> aload         <span class="token number">5</span>
      <span class="token number">89</span><span class="token operator">:</span> athrow
      <span class="token number">90</span><span class="token operator">:</span> astore        <span class="token number">6</span>
      <span class="token number">92</span><span class="token operator">:</span> aload_3
      <span class="token number">93</span><span class="token operator">:</span> ifnull        <span class="token number">128</span>
      <span class="token number">96</span><span class="token operator">:</span> aload         <span class="token number">4</span>
      <span class="token number">98</span><span class="token operator">:</span> ifnull        <span class="token number">122</span>
     <span class="token number">101</span><span class="token operator">:</span> aload_3
     <span class="token number">102</span><span class="token operator">:</span> invokeinterface #<span class="token number">12</span>，  <span class="token number">1</span>           <span class="token comment">// InterfaceMethod java/util/stream/Stream.close:()V</span>
     <span class="token number">107</span><span class="token operator">:</span> <span class="token keyword">goto</span>          <span class="token number">128</span>
     <span class="token number">110</span><span class="token operator">:</span> astore        <span class="token number">7</span>
     <span class="token number">112</span><span class="token operator">:</span> aload         <span class="token number">4</span>
     <span class="token number">114</span><span class="token operator">:</span> aload         <span class="token number">7</span>
     <span class="token number">116</span><span class="token operator">:</span> invokevirtual #<span class="token number">14</span>                 <span class="token comment">// Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V</span>
     <span class="token number">119</span><span class="token operator">:</span> <span class="token keyword">goto</span>          <span class="token number">128</span>
     <span class="token number">122</span><span class="token operator">:</span> aload_3
     <span class="token number">123</span><span class="token operator">:</span> invokeinterface #<span class="token number">12</span>，  <span class="token number">1</span>           <span class="token comment">// InterfaceMethod java/util/stream/Stream.close:()V</span>
     <span class="token number">128</span><span class="token operator">:</span> aload         <span class="token number">6</span>
     <span class="token number">130</span><span class="token operator">:</span> athrow
     <span class="token number">131</span><span class="token operator">:</span> getstatic     #<span class="token number">15</span>                 <span class="token comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
     <span class="token number">134</span><span class="token operator">:</span> aload_2
     <span class="token number">135</span><span class="token operator">:</span> invokevirtual #<span class="token number">16</span>                 <span class="token comment">// Method java/lang/StringBuilder.toString:()Ljava/lang/String;</span>
     <span class="token number">138</span><span class="token operator">:</span> invokevirtual #<span class="token number">17</span>                 <span class="token comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
     <span class="token number">141</span><span class="token operator">:</span> <span class="token keyword">return</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们可以看到 <code>java/util/stream/Stream</code> 被迭代调用，在调用 <code>InvokeDynamic</code> 之前，先引用一个 <code>Consumer</code> 。 然后，我们看到了一个字节代码块，它调用 <code>Stream.close</code> 以及调用 <code>Throwable.addSuppressed</code> 的分支。 这是编译器为 <code>try-with-resources</code> 语句生成的基本代码。 这是完整性的原始来源：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;input.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">StringBuilder</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">Stream</span> lines <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">lines</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        lines<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>line <span class="token operator">-&gt;</span> data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="结论" tabindex="-1"><a class="header-anchor" href="#结论" aria-hidden="true">#</a> 结论</h2><p>由于字节码指令集的简单性以及生成指令时几乎没有编译器优化的原因，如果需要，反汇编类文件可能是检查源代码中应用程序代码更改的一种方法。</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/rfk1118/edit/main/docs/languages/java/introduction-to-java-bytecode.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: rfk1118@gmail.com">renfakai</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/languages/java/delay-queue.html" class="nav-link prev" aria-label="锁局部变量"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->锁局部变量</div></a><a href="/languages/java/heap-java.html" class="nav-link next" aria-label="Heap源码"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Heap源码<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><!----><!----></footer></div><!--]--><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-9e5f6da6.js" defer></script>
  </body>
</html>
