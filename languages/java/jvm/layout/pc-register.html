<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pc Register | 天道酬勤。</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <meta name="description" content="天道酬勤">
    
    <link rel="preload" href="/assets/css/0.styles.7a158249.css" as="style"><link rel="preload" href="/assets/js/app.f4fd9a09.js" as="script"><link rel="preload" href="/assets/js/2.60345d56.js" as="script"><link rel="preload" href="/assets/js/93.d95d22b5.js" as="script"><link rel="prefetch" href="/assets/js/10.3cb8d427.js"><link rel="prefetch" href="/assets/js/100.d4563b42.js"><link rel="prefetch" href="/assets/js/101.f71e5a7d.js"><link rel="prefetch" href="/assets/js/102.f72d3ff3.js"><link rel="prefetch" href="/assets/js/103.f3a43078.js"><link rel="prefetch" href="/assets/js/104.eb87a341.js"><link rel="prefetch" href="/assets/js/105.1d84e443.js"><link rel="prefetch" href="/assets/js/106.47ab76a5.js"><link rel="prefetch" href="/assets/js/107.ea63fbf8.js"><link rel="prefetch" href="/assets/js/108.81d7561b.js"><link rel="prefetch" href="/assets/js/109.3fa215a7.js"><link rel="prefetch" href="/assets/js/11.4fa1170b.js"><link rel="prefetch" href="/assets/js/110.020d1700.js"><link rel="prefetch" href="/assets/js/111.290644d8.js"><link rel="prefetch" href="/assets/js/112.8afd35b0.js"><link rel="prefetch" href="/assets/js/113.14b3df1b.js"><link rel="prefetch" href="/assets/js/114.72d3e219.js"><link rel="prefetch" href="/assets/js/115.64242999.js"><link rel="prefetch" href="/assets/js/116.24975259.js"><link rel="prefetch" href="/assets/js/117.d92e1a09.js"><link rel="prefetch" href="/assets/js/118.371a2007.js"><link rel="prefetch" href="/assets/js/12.93397c16.js"><link rel="prefetch" href="/assets/js/13.f193c4d7.js"><link rel="prefetch" href="/assets/js/14.dd5ef708.js"><link rel="prefetch" href="/assets/js/15.a769b8fc.js"><link rel="prefetch" href="/assets/js/16.9319bbe6.js"><link rel="prefetch" href="/assets/js/17.122f2ce9.js"><link rel="prefetch" href="/assets/js/18.df652535.js"><link rel="prefetch" href="/assets/js/19.03af048c.js"><link rel="prefetch" href="/assets/js/20.80c0068a.js"><link rel="prefetch" href="/assets/js/21.591a21f0.js"><link rel="prefetch" href="/assets/js/22.e9387c49.js"><link rel="prefetch" href="/assets/js/23.3984bc92.js"><link rel="prefetch" href="/assets/js/24.ca342c55.js"><link rel="prefetch" href="/assets/js/25.39d44320.js"><link rel="prefetch" href="/assets/js/26.2f9e1954.js"><link rel="prefetch" href="/assets/js/27.e69c78da.js"><link rel="prefetch" href="/assets/js/28.e9974fd4.js"><link rel="prefetch" href="/assets/js/29.da58cab5.js"><link rel="prefetch" href="/assets/js/3.5adb47ba.js"><link rel="prefetch" href="/assets/js/30.86301771.js"><link rel="prefetch" href="/assets/js/31.b0f5e114.js"><link rel="prefetch" href="/assets/js/32.5fa70568.js"><link rel="prefetch" href="/assets/js/33.2372186d.js"><link rel="prefetch" href="/assets/js/34.ad919644.js"><link rel="prefetch" href="/assets/js/35.32fc5db9.js"><link rel="prefetch" href="/assets/js/36.7dae0440.js"><link rel="prefetch" href="/assets/js/37.28da2203.js"><link rel="prefetch" href="/assets/js/38.b79929c2.js"><link rel="prefetch" href="/assets/js/39.6cab241d.js"><link rel="prefetch" href="/assets/js/4.dffbf467.js"><link rel="prefetch" href="/assets/js/40.639982a6.js"><link rel="prefetch" href="/assets/js/41.9c12d206.js"><link rel="prefetch" href="/assets/js/42.4c7841d3.js"><link rel="prefetch" href="/assets/js/43.c30269e8.js"><link rel="prefetch" href="/assets/js/44.e94dd82c.js"><link rel="prefetch" href="/assets/js/45.473cb679.js"><link rel="prefetch" href="/assets/js/46.8b0f0afd.js"><link rel="prefetch" href="/assets/js/47.ee817c95.js"><link rel="prefetch" href="/assets/js/48.07f94c2e.js"><link rel="prefetch" href="/assets/js/49.e0e60d1d.js"><link rel="prefetch" href="/assets/js/5.41198759.js"><link rel="prefetch" href="/assets/js/50.a2e5aeb5.js"><link rel="prefetch" href="/assets/js/51.b1274394.js"><link rel="prefetch" href="/assets/js/52.6b9d5c88.js"><link rel="prefetch" href="/assets/js/53.bf257fb4.js"><link rel="prefetch" href="/assets/js/54.0194f552.js"><link rel="prefetch" href="/assets/js/55.d6d37b9f.js"><link rel="prefetch" href="/assets/js/56.34f0c256.js"><link rel="prefetch" href="/assets/js/57.c10f6291.js"><link rel="prefetch" href="/assets/js/58.94af468e.js"><link rel="prefetch" href="/assets/js/59.59b05064.js"><link rel="prefetch" href="/assets/js/6.cfaf2a98.js"><link rel="prefetch" href="/assets/js/60.105f441f.js"><link rel="prefetch" href="/assets/js/61.2ca93ef3.js"><link rel="prefetch" href="/assets/js/62.8086c5b8.js"><link rel="prefetch" href="/assets/js/63.4d34c184.js"><link rel="prefetch" href="/assets/js/64.93e1ccfa.js"><link rel="prefetch" href="/assets/js/65.9234cea9.js"><link rel="prefetch" href="/assets/js/66.9442ad57.js"><link rel="prefetch" href="/assets/js/67.209d9d9e.js"><link rel="prefetch" href="/assets/js/68.a1423b00.js"><link rel="prefetch" href="/assets/js/69.7ae5bb76.js"><link rel="prefetch" href="/assets/js/7.8268b911.js"><link rel="prefetch" href="/assets/js/70.3ad5dd65.js"><link rel="prefetch" href="/assets/js/71.1654bbbf.js"><link rel="prefetch" href="/assets/js/72.12f6f182.js"><link rel="prefetch" href="/assets/js/73.97e4a6b1.js"><link rel="prefetch" href="/assets/js/74.ee728a10.js"><link rel="prefetch" href="/assets/js/75.cd617e97.js"><link rel="prefetch" href="/assets/js/76.ddfbd842.js"><link rel="prefetch" href="/assets/js/77.8acefcaf.js"><link rel="prefetch" href="/assets/js/78.74eecca9.js"><link rel="prefetch" href="/assets/js/79.619ebeee.js"><link rel="prefetch" href="/assets/js/8.4c6ee865.js"><link rel="prefetch" href="/assets/js/80.c0a5a2ad.js"><link rel="prefetch" href="/assets/js/81.e5ff4f3e.js"><link rel="prefetch" href="/assets/js/82.f1fe2597.js"><link rel="prefetch" href="/assets/js/83.75e27bc4.js"><link rel="prefetch" href="/assets/js/84.ac369164.js"><link rel="prefetch" href="/assets/js/85.1fdd7023.js"><link rel="prefetch" href="/assets/js/86.c3a7f83b.js"><link rel="prefetch" href="/assets/js/87.e1939394.js"><link rel="prefetch" href="/assets/js/88.61c36dc5.js"><link rel="prefetch" href="/assets/js/89.e2cc524e.js"><link rel="prefetch" href="/assets/js/9.126e9d0f.js"><link rel="prefetch" href="/assets/js/90.710ea665.js"><link rel="prefetch" href="/assets/js/91.8c77709f.js"><link rel="prefetch" href="/assets/js/92.f90f61cd.js"><link rel="prefetch" href="/assets/js/94.7ef1afdf.js"><link rel="prefetch" href="/assets/js/95.ee59fc26.js"><link rel="prefetch" href="/assets/js/96.695e756d.js"><link rel="prefetch" href="/assets/js/97.1bce3421.js"><link rel="prefetch" href="/assets/js/98.91b08f18.js"><link rel="prefetch" href="/assets/js/99.0bb238a7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7a158249.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">天道酬勤。</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/rfk1118" target="_self" class="nav-link external">
  GitHub
  <!----></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/rfk1118" target="_self" class="nav-link external">
  GitHub
  <!----></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/introduction/" class="sidebar-link">前言</a></li><li><section class="sidebar-group depth-0"><a href="/middleware/" class="sidebar-heading clickable"><span>中间件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><a href="/middleware/netty/" class="sidebar-heading clickable open"><span>Netty</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-2"><a href="/middleware/netty/knowledge/" class="sidebar-heading clickable open"><span>基础知识</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/middleware/netty/knowledge/reference.html" class="sidebar-link">参考资料</a></li><li><a href="/middleware/netty/knowledge/read-source.html" class="sidebar-link">如何读源码</a></li><li><a href="/middleware/netty/knowledge/quick-start.html" class="sidebar-link">快速上手</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>Reactor</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/middleware/netty/reactor/single.html" class="sidebar-link">Single</a></li><li><a href="/middleware/netty/reactor/multiple.html" class="sidebar-link">Multiple</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>EventLoop</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/middleware/netty/nio/event-loop/nio-event-loop-group.html" class="sidebar-link">EventLoopGroup</a></li><li><a href="/middleware/netty/nio/event-loop/nio-event-loop.html" class="sidebar-link">EventLoop</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><a href="/middleware/netty/nio/selectors/selector" class="sidebar-heading clickable"><span>Selectors</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/middleware/netty/nio/selectors/open-selector.html" class="sidebar-link">OpenSelector</a></li><li><a href="/middleware/netty/nio/selectors/thread-factory.html" class="sidebar-link">DefaultThreadFactory</a></li><li><a href="/middleware/netty/nio/selectors/chooser-factory.html" class="sidebar-link">ChooserFactory</a></li></ul></section></li><li><a href="/middleware/netty/nio/bootstrap/bootstrap.html" class="sidebar-link">Bootstrap</a></li><li><section class="sidebar-group is-sub-group depth-2"><a href="/middleware/netty/nio/channels/channel" class="sidebar-heading clickable"><span>Channel</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/middleware/netty/nio/channels/channel-init.html" class="sidebar-link">Channel-Init</a></li><li><a href="/middleware/netty/nio/channels/channel-register.html" class="sidebar-link">Channel-register</a></li><li><a href="/middleware/netty/nio/channels/channel-handler.html" class="sidebar-link">Channel-handler</a></li><li><a href="/middleware/netty/nio/channels/channel-bind.html" class="sidebar-link">Channel-bind</a></li><li><a href="/middleware/netty/nio/channels/channel-unsafe.html" class="sidebar-link">Channel-Unsafe</a></li><li><a href="/middleware/netty/nio/channels/channel-pipeline.html" class="sidebar-link">Channel-Pipeline</a></li></ul></section></li><li><a href="/middleware/netty/nio/codec/codec.html" class="sidebar-link">Codec</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>编程语言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading open"><span>虚拟机</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-3"><a href="/languages/java/jvm/layout/run-time-data-areas" class="sidebar-heading clickable open"><span>内存布局</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/languages/java/jvm/layout/pc-register.html" aria-current="page" class="active sidebar-link">Pc Register</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/languages/java/jvm/layout/pc-register.html#基于寄存器架构设计" class="sidebar-link">基于寄存器架构设计</a></li><li class="sidebar-sub-header"><a href="/languages/java/jvm/layout/pc-register.html#基于栈架构设计" class="sidebar-link">基于栈架构设计</a></li><li class="sidebar-sub-header"><a href="/languages/java/jvm/layout/pc-register.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/languages/java/jvm/layout/pc-register.html#参考材料" class="sidebar-link">参考材料</a></li></ul></li><li><a href="/languages/java/jvm/layout/stacks.html" class="sidebar-link">Stacks</a></li><li><a href="/languages/java/jvm/layout/Frames.html" class="sidebar-link">Frames</a></li><li><a href="/languages/java/jvm/layout/share-data.html" class="sidebar-link">共享数据</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-3"><p class="sidebar-heading"><span>垃圾回收器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/languages/java/jvm/jvm-select.html" class="sidebar-link">jvm-select</a></li><li><a href="/languages/java/jvm/SerialHeap.html" class="sidebar-link">SerialHeap</a></li><li><a href="/languages/java/jvm/safepoint.html" class="sidebar-link">safepoint</a></li><li><a href="/languages/java/jvm/jvm-select-use.html" class="sidebar-link">生产使用</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><a href="/languages/java/thread/java/juc/read-me" class="sidebar-heading clickable"><span>多线程编程</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-3"><p class="sidebar-heading open"><span>基础知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/languages/java/thread/java/juc/aos.html" class="sidebar-link">exclusively</a></li><li><a href="/languages/java/thread/java/juc/atomic.html" class="sidebar-link">cas</a></li><li><a href="/languages/java/thread/java/juc/aqs.html" class="sidebar-link">aqs</a></li><li><a href="/languages/java/thread/java/juc/blocking.html" class="sidebar-link">LockSupport</a></li><li><a href="/languages/java/thread/java/juc/clh.html" class="sidebar-link">clh锁</a></li><li><a href="/languages/java/thread/java/juc/condition.html" class="sidebar-link">Condition</a></li><li><a href="/languages/java/thread/java/juc/future.html" class="sidebar-link">FutureTask</a></li><li><a href="/languages/java/thread/java/juc/daemon.html" class="sidebar-link">daemon</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-3"><p class="sidebar-heading"><span>应用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/languages/java/thread/java/juc/thread-factory.html" class="sidebar-link">ThreadFactory</a></li><li><a href="/languages/java/thread/java/juc/rejected-execution-handler.html" class="sidebar-link">ExecutionPolicy</a></li><li><a href="/languages/java/thread/java/juc/work.html" class="sidebar-link">Worker</a></li><li><a href="/languages/java/thread/java/juc/thread-pool-executor.html" class="sidebar-link">ThreadPoolExecutor</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/languages/java/auto-box.html" class="sidebar-link">自动装箱</a></li><li><a href="/languages/java/delay-queue.html" class="sidebar-link">锁局部变量</a></li><li><a href="/languages/java/introduction-to-java-bytecode.html" class="sidebar-link">基于栈的指令集</a></li><li><a href="/languages/java/heap-java.html" class="sidebar-link">Heap源码</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>go</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/languages/go/heap-go.html" class="sidebar-link">Heap源码</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基本功</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><a href="/basic-skill/algorithms" class="sidebar-heading clickable open"><span>算法</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-2"><a href="/basic-skill/algorithms/sort/sort" class="sidebar-heading clickable open"><span>排序</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic-skill/algorithms/sort/bubble-sort.html" class="sidebar-link">冒泡排序</a></li><li><a href="/basic-skill/algorithms/sort/select-sort.html" class="sidebar-link">选择排序</a></li><li><a href="/basic-skill/algorithms/sort/insert-sort.html" class="sidebar-link">插入排序</a></li><li><a href="/basic-skill/algorithms/sort/merge-sort.html" class="sidebar-link">归并排序</a></li><li><a href="/basic-skill/algorithms/sort/quick-sort.html" class="sidebar-link">快速排序</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>数据结构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic-skill/algorithms/structure/union-find-structure.html" class="sidebar-link">并查集</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><a href="/basic-skill/algorithms/tree/binary-tree-concept" class="sidebar-heading clickable"><span>Tree</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic-skill/algorithms/tree/pre-order.html" class="sidebar-link">前序遍历</a></li><li><a href="/basic-skill/algorithms/tree/binary-tree-algs4.html" class="sidebar-link">二叉树-算法4</a></li><li><a href="/basic-skill/algorithms/tree/balanced-search-trees.html" class="sidebar-link">2-3-搜索树</a></li><li><a href="/basic-skill/algorithms/heap/heap.html" class="sidebar-link">Heap</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><a href="/basic-skill/algorithms/graphs/" class="sidebar-heading clickable"><span>图</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic-skill/algorithms/graphs/graph-concept.html" class="sidebar-link">概念</a></li><li><a href="/basic-skill/algorithms/graphs/directed-graph.html" class="sidebar-link">有向图</a></li><li><a href="/basic-skill/algorithms/graphs/graph-search.html" class="sidebar-link">搜索</a></li><li><a href="/basic-skill/algorithms/graphs/minimum-spanning-tree.html" class="sidebar-link">最小生成树</a></li><li><a href="/basic-skill/algorithms/graphs/shortest-path-algnorithms.html" class="sidebar-link">最短路径算法</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic-skill/algorithms/other/Edsger-Dijkstra.html" class="sidebar-link">荷兰国旗</a></li><li><a href="/basic-skill/algorithms/other/binary-Search.html" class="sidebar-link">二分查找法</a></li><li><a href="/basic-skill/algorithms/other/swap-or-exchange.html" class="sidebar-link">交换还是移动？</a></li><li><a href="/basic-skill/algorithms/other/xor.html" class="sidebar-link">Xor</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/basic-skill/design-pattern/" class="sidebar-heading clickable"><span>设计模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-2"><p class="sidebar-heading open"><span>policy</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic-skill/design-pattern/policy/spring-error-demo.html" class="sidebar-link">spring-error-demo</a></li><li><a href="/basic-skill/design-pattern/policy/spring-policy.html" class="sidebar-link">spring-policy</a></li><li><a href="/basic-skill/design-pattern/policy/spring-fly-weight.html" class="sidebar-link">spring-flyweight-policy</a></li></ul></section></li><li><a href="/basic-skill/design-pattern/interpreter/interpreter-pattern.html" class="sidebar-link">interpreter</a></li><li><section class="sidebar-group is-sub-group depth-2"><a href="/basic-skill/design-pattern/structure/decorator/concept" class="sidebar-heading clickable"><span>decorator</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic-skill/design-pattern/structure/decorator/decorator-java.html" class="sidebar-link">Decorator-Java</a></li><li><a href="/basic-skill/design-pattern/structure/decorator/decorator-netty.html" class="sidebar-link">Decorator-Netty</a></li><li><a href="/basic-skill/design-pattern/structure/decorator/decorator-hystrix.html" class="sidebar-link">Decorator-Hystrix</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/framework/" class="sidebar-heading clickable"><span>框架</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-2"><a href="/framework/spring/" class="sidebar-heading clickable open"><span>Spring</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/framework/spring/di-concept.html" class="sidebar-link">DI概念</a></li><li><a href="/framework/spring/di.html" class="sidebar-link">DI实现</a></li><li><a href="/framework/spring/initialize-bean.html" class="sidebar-link">扩展点</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>计算机网络</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic-skill/network/tree-shake-hands.html" class="sidebar-link">三次握手</a></li><li><a href="/basic-skill/network/four-wave.html" class="sidebar-link">四次挥手</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/cicd/" class="sidebar-heading clickable"><span>CI/CD</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><a href="/cicd/docker/" class="sidebar-heading clickable open"><span>docker</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/cicd/docker/buildimage.html" class="sidebar-link">Build  image</a></li></ul></section></li></ul></section></li><li><a href="/linked/" class="sidebar-link">常用网站</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="pc-register">Pc Register</h1> <p>CPU想要进行数据读写，需要与三条总线进行交互：</p> <ol><li>地址总线，根据地址总线指定存储单元、可以查找内存大小</li> <li>数据总线，数据的传输量大小</li> <li>控制总线，控制外部组件</li></ol> <p>根据程序执行不同对内存区域也有划分，例如读区域、写区域。</p> <ol><li>数据区域可读可写，</li> <li>程序编译后仅可以读</li></ol> <p>经历高级语言发展，现在也不这么绝对了，例如Java支持字节码替换。常用架构为基于寄存器架构设计，Java使用基于栈架构设计(为了解决底层计算机指令集不同问题，中间加了一层)。</p> <h2 id="基于寄存器架构设计">基于寄存器架构设计</h2> <p>对于控制总线中的寄存器最具有代表的就是<code>CS、IP</code>两个寄存器，其中<code>CS</code>为代码段寄存器，<code>IP</code>为指令指针寄存器。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>相关内容可参考<a href="https://book.douban.com/subject/35038473/" target="_blank" rel="noopener noreferrer">《汇编语言（第4版）》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <h2 id="基于栈架构设计">基于栈架构设计</h2> <div class="custom-block tip"><p class="custom-block-title">官方文档</p> <p>The Java Virtual Machine can support many threads of execution at once (JLS §17). Each Java Virtual Machine thread has its own pc (program counter) register. At any point, each Java Virtual Machine thread is executing the code of a single method, namely the current method (§2.6) for that thread. If that method is not native, the pc register contains the address of the Java Virtual Machine instruction currently being executed. If the method currently being executed by the thread is native, the value of the Java Virtual Machine's pc register is undefined. The Java Virtual Machine's pc register is wide enough to hold a returnAddress or a native pointer on the specific platform.</p></div> <p>Java虚拟机可以同时支持许多执行线程（JLS §17）。每个Java虚拟机线程都有自己的pc（程序计数器）寄存器。在任何时候，每个Java虚拟机线程都在执行单个方法的代码，即该线程的当前方法（§2.6）。如果该方法不是本机，pc寄存器包含当前正在执行的Java虚拟机指令的地址。如果线程当前执行的方法是本机，则Java虚拟机的pc寄存器的值未定义。Java虚拟机的pc寄存器足够宽，可以在特定平台上保存<code>returnAddress</code>或本机指针。</p> <div class="custom-block tip"><p class="custom-block-title">官方文档</p> <p>The returnAddress type is used by the Java Virtual Machine's jsr, ret, and jsr_w instructions (§jsr, §ret, §jsr_w). The values of the returnAddress type are pointers to the opcodes of Java Virtual Machine instructions. Unlike the numeric primitive
types, the returnAddress type does not correspond to any Java programming language type and cannot be modified by the running program.</p></div> <p><code>returnAddress</code>为虚拟机操作码指针，并且不可被修改。</p> <p>假设<code>CS</code>内容为<code>某个 class 某方法</code>文件，<code>IP</code>内容为<code>第 n 行</code>，<code>CS + IP</code>代表调用某个类某个方法，由于<code>Java</code>中没有使用寄存器模型，而是栈模型（设计通用性)，上面假设仅仅为暗喻，<code>Jvm</code>设计代表就是<code>Pc Register</code>。</p> <h3 id="测试案例">测试案例</h3> <p>编写常用代码<code>helloworld</code>，来查看<code>pc寄存器</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;helloWorld&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>进行编译和反编译，执行命令如下：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>// 编译class
 javac Main.java
// 反编译class
 javap <span class="token parameter variable">-v</span> Main 
</code></pre></div><p>对于<code>class</code>文件的<code>main</code>方法可以看做是<code>CS</code>，对于<code>main</code>方法中的<code>0、3、5、8</code>可以看作行号指示器，也就是<code>IP</code>，只不过虚拟机用<code>pc寄存器</code>进行统一处理。</p> <div class="language-java extra-class"><pre class="language-java"><code>  <span class="token comment">// todo 其他省略</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    descriptor<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">Ljava</span><span class="token operator">/</span>lang<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token class-name">V</span>
    flags<span class="token operator">:</span> <span class="token constant">ACC_PUBLIC</span><span class="token punctuation">,</span> <span class="token constant">ACC_STATIC</span>
    <span class="token class-name">Code</span><span class="token operator">:</span>
      stack<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> locals<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> args_size<span class="token operator">=</span><span class="token number">1</span>
         <span class="token comment">// pc寄存器会记录运行到哪里</span>
         <span class="token number">0</span><span class="token operator">:</span> getstatic     #<span class="token number">2</span>                  <span class="token comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
         <span class="token number">3</span><span class="token operator">:</span> ldc           #<span class="token number">3</span>                  <span class="token comment">// String helloWorld</span>
         <span class="token number">5</span><span class="token operator">:</span> invokevirtual #<span class="token number">4</span>                  <span class="token comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
         <span class="token number">8</span><span class="token operator">:</span> <span class="token keyword">return</span>
      <span class="token class-name">LineNumberTable</span><span class="token operator">:</span>
        line <span class="token number">5</span><span class="token operator">:</span> <span class="token number">0</span>
        line <span class="token number">6</span><span class="token operator">:</span> <span class="token number">8</span>
</code></pre></div><h3 id="源码">源码</h3> <p>在<code>hotspot</code>源码中查找<code>frame.hpp</code>，具体情况如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> frame <span class="token punctuation">{</span>
 <span class="token keyword">private</span><span class="token operator">:</span>
  intptr_t<span class="token operator">*</span> _sp<span class="token punctuation">;</span> <span class="token comment">// stack pointer (from Thread::last_Java_sp)</span>
  <span class="token comment">// pc寄存器，也就是程序计数器</span>
  address   _pc<span class="token punctuation">;</span> <span class="token comment">// program counter (the next instruction after the call)</span>
  <span class="token comment">// todo 其他省略</span>
  <span class="token comment">// pc：返回此帧将正常继续的pc。</span>
  <span class="token comment">// 它必须指向下一条要执行的指令的开头</span>
  address <span class="token function">pc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>             <span class="token punctuation">{</span> <span class="token keyword">return</span> _pc<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token comment">// debug使用，也就是未优化前跳转指针</span>
  address <span class="token function">raw_pc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
  <span class="token comment">// 设置新的处理opcode地址</span>
  <span class="token keyword">void</span> <span class="token function">set_pc</span><span class="token punctuation">(</span> address   newpc <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// patching operations</span>
  <span class="token keyword">void</span>   <span class="token function">patch_pc</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token operator">*</span> thread<span class="token punctuation">,</span> address pc<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// todo 其他省略</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="总结">总结</h2> <ul><li><code>Pc Register</code>是<code>Java</code>指示当前线程运行到哪行<code>opcode</code>的指示器，与汇编，Go语言中的<code>CS、IP</code>等效。</li> <li><code>Pc Register</code>是线程独有的，<code>Pc Register</code>不存在oom，其只占线程空间中最小内存</li></ul> <h2 id="参考材料">参考材料</h2> <ul><li><a href="https://book.douban.com/subject/35038473/" target="_blank" rel="noopener noreferrer">《汇编语言（第4版）》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.oracle.com/javase/specs/jvms/se17/jvms17.pdf" target="_blank" rel="noopener noreferrer">The Java® VirtualMachine Specification<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://hg.openjdk.java.net/jdk8/jdk8/hotspot/file/c40fbf634c90/src/share/vm/runtime/frame.cpp" target="_blank" rel="noopener noreferrer">frame.cpp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/middleware/netty/nio/codec/codec.html" class="prev">
        Codec
      </a></span> <span class="next"><a href="/languages/java/jvm/layout/stacks.html">
        Stacks
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.f4fd9a09.js" defer></script><script src="/assets/js/2.60345d56.js" defer></script><script src="/assets/js/93.d95d22b5.js" defer></script>
  </body>
</html>
