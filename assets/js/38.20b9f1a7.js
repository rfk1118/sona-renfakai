(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{351:function(e,v,l){e.exports=l.p+"assets/img/tenured.cb9104a7.jpg"},495:function(e,v,l){"use strict";l.r(v);var _=l(8),a=Object(_.a)({},(function(){var e=this,v=e._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"生产使用"}},[e._v("生产使用")]),e._v(" "),v("p",[e._v("垃圾回收器的选择还是根据实际生产环境进行选择，选择主要根据两个指标"),v("code",[e._v("最大吞吐量、最短回收停顿时间")]),e._v("。")]),e._v(" "),v("p",[e._v("最大吞吐量使用的是"),v("code",[e._v("标记-整理")]),e._v("算法，整理过程中需要重新移动对象，所以耗时增加，但是堆内存空间不需要额外的空闲表进行记录，所以在分配对象时间比较快，其流程如下：")]),e._v(" "),v("div",{staticClass:"mermaid"},[e._v("graph LR\n    A[生成临时数据栈] --\x3e B[标记活动对象]\n    B --\x3e C[计算新地址]\n    C --\x3e D[更新指针]\n    D --\x3e E[将对象移动到新位置]")]),v("p",[e._v("最短回收停顿时间使用"),v("code",[e._v("标记-清除")]),e._v("算法，由于没有对象的移动，仅仅需要将是释放空间记录到空闲表中，所以垃圾回收阶段停顿时间少，但是在对象分配的时候需要查找空闲表，所以在吞吐量降低")]),e._v(" "),v("p",[e._v("现以常用版本"),v("code",[e._v("jdk1.8")]),e._v("为案例进行讲解，现使用下图进行组合:")]),e._v(" "),v("p",[v("img",{attrs:{src:l(351),alt:"An image"}})]),e._v(" "),v("ol",[v("li",[v("code",[e._v("标记-整理")]),e._v("主要包含"),v("code",[e._v("Serial Old、Parallel Old")]),e._v("，最大吞吐量进行组合时可以使用，"),v("code",[e._v("Serial Old")]),e._v("在老年代使用单线程，回收较慢，不建议作为老年代主要回收器使用，服务器一般都是web项目。\n"),v("ul",[v("li",[v("s",[v("code",[e._v("Serial + Serial Old")])]),e._v(" 仅客户端应用建议使用")]),e._v(" "),v("li",[v("s",[v("code",[e._v("ParNew + Serial Old")])]),e._v(" 新生代多线程回收很快，老年代单线程回收慢，不建议使用")]),e._v(" "),v("li",[v("s",[v("code",[e._v("Parallel Scavenge + Serial Old")])]),e._v(" 新生代多线程回收很快，老年代单线程回收慢，不建议使用")]),e._v(" "),v("li",[v("code",[e._v("Parallel Scavenge + Parallel Old")]),e._v(" 新生代、老年代都使用多线程，如果峰值应用程序性能是第一个优先级，并且没有暂停时间要求或暂停1秒或更长时间是可以接受的，那么让VM选择集器，或选择带有"),v("code",[e._v("-XX:+UseParallelGC")]),e._v("的并行收集器")])])]),e._v(" "),v("li",[v("code",[e._v("标记-清除")]),e._v("主要包含"),v("code",[e._v("CMS")]),e._v(" "),v("ul",[v("li",[v("s",[v("code",[e._v("Serial + CMS")])]),e._v(" 新生代回收频率高，单线程版本导致应用"),v("code",[e._v("最短回收停顿时间")]),e._v("并未实现")]),e._v(" "),v("li",[v("code",[e._v("ParNew + CMS +Serial Old")]),e._v(" 常用版本，"),v("code",[e._v("CMS")]),e._v("在垃圾回收的时候会让内存碎片化，往往会出现老年代还有很多剩余空间，但就是无法找到足够大的连续空间来分配当前对象，而不得不提前触发一次"),v("code",[e._v("Full GC")]),e._v("的情况，所以需要"),v("code",[e._v("Serial Old")]),e._v("进行辅助")])])])])])}),[],!1,null,null,null);v.default=a.exports}}]);